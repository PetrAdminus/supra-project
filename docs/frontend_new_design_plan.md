# План интеграции макета ElyxS

Документ описывает обязательные шаги для внедрения обновлённого фронтенд‑макета из каталога `New Design`. Все участники команды и ассистенты должны сверяться с этим планом перед изменениями пользовательского интерфейса.

## 1. Подготовка стекла

- Зафиксировать гайд `New Design/src/guidelines/DesignSystem.md` как главный источник по визуальному стилю, токенам и компонентам.
- Обновить `New Design/package.json` и `New Design/vite.config.ts` под целевые версии (React 19, Vite 7), удалить alias с “пришитыми” версиями (`lucide-react@…`, `figma:asset/...`) и настроить единый менеджер пакетов (pnpm).
- Привести тексты в `New Design/src/components/translations.ts` и `DesignSystem.md` к UTF‑8 без битых символов.

## 2. Архитектура приложения

- Перенести ShellLayout из `frontend/src/components/layout/ShellLayout.tsx`: выбор режима (mock/supra), ролей (user/admin), локали, интеграция `WalletPanel`.
- Настроить маршрутизацию через `react-router-dom` (обёртка `BrowserRouter`, компонент `AppRoutes`), отказаться от локального `useState` в `App.tsx`.
- Обновить `Header`/`Footer` под новую навигацию и состояния (выбор активного роута, подключение кошелька).

## 3. Страницы пользователя

- Подключить реальные данные в `WalletContent`, `TicketsContent`, `DrawsContent`, `HistoryContent`, `ProfileContent`: использовать существующие хуки (`useLotteryStatus`, `useTicketHistory`, `useLotteryEvents`, сторы Zustand).
- Реализовать состояния loading / empty / error согласно правилам DesignSystem (подсветки, бейджи, skeleton).
- Обновить страницы `TicketsPage`, `DrawsPage`, `HistoryPage`, `ProfilePage` под API и сторы, сохранив визуальные паттерны (glass, glow, градиенты).

## 4. Новые функциональные разделы

- Сверстать на базе DesignSystem недостающие экраны:
  1. `FairnessPage` — журнал VRF с фильтрами и поиском.
  2. `LogsPage` — таблица событий лотереи и переключатель ошибок.
  3. `AdminPage` — формы конфигураций (VRF, gas, whitelist, treasury) и выполнение Supra-команд.
  4. `ProgressPage` — чек-листы и достижения с мутациями.
- Для каждого раздела использовать компоненты из `New Design/src/components/ui` (shadcn) и документировать связь с DesignSystem.

## 5. Инфраструктура и качество

- Перенести конфигурации линтера, форматтера, тестов, Storybook из текущего `frontend`.
- Настроить `react-i18next`: импортировать словари, заменить кастомный `LanguageContext` или адаптировать обёртку.
- Добавить юнит-, интеграционные и Storybook-тесты для критичных компонентов; проверить доступность (aria, контраст).

## 6. Миграция и внедрение

- Ввести feature-флаг для переключения старый/новый UI.
- Провести регрессионное тестирование в режимах mock и supra, для ролей user/admin.
- Обновить README, MERGE_GUIDE и другие внутренние документы: каждое UI-изменение должно проходить проверку на соответствие DesignSystem.

## 7. Поддержка

- Организовать чек-лист ревью визуальных изменений (соответствие токенам, адаптив, состояния).
- Подготовить шаблон для новых компонентов (структура файлов, импорт токенов, проверка доступности).
- Регулярно собирать обратную связь и при необходимости обновлять DesignSystem и макет.
