# Доступность и локализация фронтенда

Документ дополняет [frontend/overview.md](overview.md) и описывает требования RFC v1 к доступности (a11y) и переводам UI
платформы Supra Lottery.

## Стандарты
- **WCAG 2.1 AA.** Все новые экраны должны проходить проверку по критериям контраста, управления клавиатурой, фокус-видимости и
  адаптивности.
- **ARIA live-region.** Для статусов VRF, выплат и рефандов используйте `aria-live="polite"`, чтобы ассистивные технологии
  сообщали об изменениях.
- **Разметка форм.** Поля ввода обязаны иметь `label` и описания ошибок; подсказки должны быть доступны через `aria-describedby`.

## UI-паттерны
- **Списки розыгрышей.** При обновлении `status_overview` добавляйте `role="status"`, чтобы слепые пользователи получали
  уведомления.
- **Диалоги AutomationBot.** Диалог подтверждения dry-run обязан фокусироваться на первом интерактивном элементе и возвращать
  фокус на вызывающую кнопку после закрытия.
- **Покупка билетов.** Ошибки `E_PURCHASE_RATE_LIMIT_*` отображаются в виде alert-компонента с `role="alert"` и пояснением
  доступной альтернативы (подождать N секунд, обратиться в поддержку).

## Проверки
- **Автотесты.** Добавьте `npm run test:a11y`, который прогоняет Lighthouse/axe для основных маршрутов (`/`, `/lottery/:id`,
  `/admin`, `/partner`). Результат прикладывается к релизному чек-листу.
- **Скринридер ревью.** Перед релизом выполняется ручная проверка в NVDA/VoiceOver для сценариев покупки билетов, dry-run и
  просмотра истории.
- **Контроль локалей.** Скрипт `npm run i18n:check` сравнивает ключи переводов и падает, если обнаружены отсутствующие строки.

## Локализация
- **Источник правды.** Все строки хранятся в `frontend/src/i18n`. При добавлении новой строки обновляйте «книгу проекта» (разделы
  с описанием действий) и фиксируйте перевод в PR.
- **Freeze window.** За 48 часов до релиза словарь замораживается (`i18n-freeze.json`); изменения допускаются только с согласия
  продакт-менеджера и обновлением документации.
- **Форматы чисел.** Используйте `Intl.NumberFormat` с локалью пользователя и резервным вариантом `en-US`.

## Мониторинг
- **Sentry breadcrumbs.** Для ошибок перевода (`MissingTranslationError`) публикуйте breadcrumb и создавайте тикет в поддержку.
- **Метрика `a11y_violation_total`.** Интегрируйте axe-core в Storybook; каждое нарушение увеличивает счётчик и отображается на
  статусной странице QA.

## Связанные документы
- [frontend/overview.md](overview.md)
- [operations/status_page.md](../operations/status_page.md)
- [architecture/lottery_parallel_plan.md](../../architecture/lottery_parallel_plan.md) — раздел 4.R
- [qa/testing_matrix.md](../qa/testing_matrix.md)
