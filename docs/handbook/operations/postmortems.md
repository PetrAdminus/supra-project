# Шаблон постмортема lottery_multi

Документ хранит краткие отчёты по инцидентам и регулярным ретроспективам после релиза lottery_multi. Каждая запись заполняется в течение 24 часов после устранения инцидента.

## 1. Журнал постмортемов

| Дата | Тип (Инцидент/Ретроспектива) | Описание | Итоговое состояние | Ответственные | Связанные ссылки |
|------|------------------------------|----------|--------------------|---------------|------------------|
| ____ | Инцидент | | | | |
| ____ | Ретроспектива | | | | |

## 2. Шаблон отчёта

```
## <Дата и краткое название>

### Контекст
- Что произошло, когда и как обнаружено.
- Затронутые сервисы и пользователи.

### Таймлайн
- HH:MM – событие/алерт
- HH:MM – первое действие
- HH:MM – восстановление

### Влияние
- Пользователи: количество, география.
- Финансовый эффект: призы, комиссии, партнёрские выплаты.
- Имиджевые риски: коммуникации, баг-баунти.

### Корневая причина
- Технические детали.
- Процессные или организационные факторы.

### Восстановление
- Какие действия выполнены.
- Ссылки на команды CLI, PR, изменения конфигурации.

### Дальнейшие действия
- TODO-список с ответственными и сроками.
- Ссылки на тикеты (Jira/Notion/etc.).

### Уроки и улучшения
- Что изменить в процессах, документации, мониторинге.
- Нужны ли тренировки/дополнительные проверки.
```

## 3. Процесс согласования
1. Автор (дежурный инженер или владелец процесса) заполняет отчёт и добавляет ссылку в таблицу журнала.
2. Ответственный за домен (On-chain Lead, DevOps Lead или Support Lead) проводит ревью и оставляет комментарии.
3. После утверждения скорректировать соответствующие разделы: [post_release_support.md](post_release_support.md), [runbooks.md](runbooks.md), [monitoring.md](monitoring.md), [status_page.md](status_page.md).
4. Если инцидент затрагивал партнёров или пользователей, подготовить публичное сообщение и ссылку на него добавить в таблицу.

## 4. Требования к качеству
- Минимум один follow-up action с дедлайном и ответственным.
- Все таймлайны — в UTC, с точностью до минут.
- Никаких персональных данных пользователей в отчётах (соблюдение комплаенса).
- Упоминать версии контрактов (`config_version`, git-тег) и задействованные capability.

## 5. Ретроспективы
- Ежемесячные ретроспективы AutomationBot и dual-write добавляются в журнал как тип `Ретроспектива`.
- Квартальные обзоры экономики и выплат включают сверку SLA, метрик `status_overview` и планов roadmap.
- Выводы ретроспектив переносятся в `docs/architecture/lottery_parallel_plan.md` и `docs/architecture/rfc_v1_implementation_notes.md`.

## 6. Ссылки
- Журнал операций: [incident_log.md](incident_log.md)
- Пострелизная поддержка: [post_release_support.md](post_release_support.md)
- Мониторинг: [monitoring.md](monitoring.md)
- Статусная страница: [status_page.md](status_page.md)
- План этапов: [../../architecture/lottery_parallel_plan.md](../../architecture/lottery_parallel_plan.md)
