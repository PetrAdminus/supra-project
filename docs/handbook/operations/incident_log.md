# Журнал операций и инцидентов lottery_multi

> Используется для фиксации релизов, отклонений, dry-run AutomationBot и пополнений VRF-депозита. Записи ведутся в обратном хронологическом порядке.

| Дата/время (UTC) | Тип события | Описание | Ответственные | Ссылки |
|------------------|-------------|----------|---------------|--------|
| ____ | Релиз | | | |
| ____ | Инцидент | | | |
| ____ | Dry-run | | | |
| ____ | Backfill | | | |
| ____ | VRF-пополнение | | | |
| ____ | Cancellation | | | |

## Руководство по заполнению
1. Каждое событие должно содержать ссылку на PR, задачу или страницу runbook.
2. В колонке «Описание» фиксируются шаги и наблюдения, включая метрики/события.
3. В течение 24 часов после инцидента добавляется раздел «Послесловие» с выводами и действиями по предотвращению, а также ссылка на запись в [postmortems.md](postmortems.md).
4. Для миграций/импорта сводок прикладывайте JSON-артефакты `history_backfill.sh dry-run` и вывод `dual_write_control.sh status` через поле «Ссылки» (`--links "[Backfill JSON](...)"`) скрипта `incident_log.sh`.
5. Runbook обязан ссылаться на соответствующие записи после выполнения процедур.

## Автоматическое заполнение

Предпочтительный способ добавления записей — CLI `SupraLottery/supra/scripts/incident_log.sh`. Пример:

```bash
SupraLottery/supra/scripts/incident_log.sh \
  --type "Релиз" \
  --description "Выкатили lottery_multi v1.0.0" \
  --responsible "RootAdmin, DevOps" \
  --links "[PR #123](https://example.com/pr/123)"
```

Команда автоматически подставляет текущее UTC-время (можно переопределить `--timestamp`), обновляет таблицу в обратном хронологическом порядке и очищает шаблонные строки `____`.
