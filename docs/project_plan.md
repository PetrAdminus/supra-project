# РџР»Р°РЅ С‚СЂР°РЅСЃС„РѕСЂРјР°С†РёРё Supra Lottery

## РћСЃРЅРѕРІРЅС‹Рµ РїСЂРёРЅС†РёРїС‹
- **Р­РІРѕР»СЋС†РёСЏ РІРјРµСЃС‚Рѕ РїРµСЂРµРїРёСЃС‹РІР°РЅРёСЏ:** СЃС‚СЂРѕРёРј VRF-С…Р°Р±, С„Р°Р±СЂРёРєСѓ Р»РѕС‚РµСЂРµР№ Рё СЃРѕРїСѓС‚СЃС‚РІСѓСЋС‰РёРµ СЃРµСЂРІРёСЃС‹ РїРѕРІРµСЂС… С‚РµРєСѓС‰РµРіРѕ СЂРµРїРѕР·РёС‚РѕСЂРёСЏ Supra Lottery, СЃРѕС…СЂР°РЅСЏСЏ РїРѕР»РµР·РЅС‹Рµ РёРЅСЃС‚СЂСѓРјРµРЅС‚С‹ Рё РїРѕСЃР»РµРґРѕРІР°С‚РµР»СЊРЅРѕ СЂРµС„Р°РєС‚РѕСЂСЏ РѕРЅС‡РµР№РЅ-СЃРѕСЃС‚РѕСЏРЅРёРµ.
- **Р РµС€РµРЅРёСЏ СЃРѕРІРјРµСЃС‚РЅРѕ СЃ РІР»Р°РґРµР»СЊС†РµРј РїСЂРѕРґСѓРєС‚Р°:** РєРѕРіРґР° С‚СЂРµР±СѓРµС‚СЃСЏ СѓС‚РѕС‡РЅРµРЅРёРµ РїРѕ С„СѓРЅРєС†РёРѕРЅР°Р»СЊРЅРѕСЃС‚Рё РёР»Рё СЂРµР°Р»РёР·Р°С†РёРё, РєРѕРјР°РЅРґР° СЂР°Р·СЂР°Р±РѕС‚РєРё Р·Р°РїСЂР°С€РёРІР°РµС‚ РІРІРѕРґРЅС‹Рµ Сѓ РІР»Р°РґРµР»СЊС†Р° РїСЂРѕРґСѓРєС‚Р° РґРѕ РЅР°С‡Р°Р»Р° СЂР°Р±РѕС‚.
- **РњР°СЃС€С‚Р°Р±РёСЂСѓРµРјРѕСЃС‚СЊ РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ:** РёР·Р±РµРіР°РµРј СѓРЅРёРєР°Р»СЊРЅС‹С… РґРѕРїСѓС‰РµРЅРёР№, С‡С‚РѕР±С‹ РєР°Р¶РґС‹Р№ РєРѕРјРїРѕРЅРµРЅС‚ (РєРѕРЅС‚СЂР°РєС‚С‹, Р±СЌРєРµРЅРґ, С„СЂРѕРЅС‚РµРЅРґ, growth-С„СѓРЅРєС†РёРё) Р»РµРіРєРѕ РїРѕРґРґРµСЂР¶РёРІР°Р» РЅРѕРІС‹Рµ Р»РѕС‚РµСЂРµРё, РґР¶РµРєРїРѕС‚С‹, РїР°СЂС‚РЅС‘СЂРѕРІ Рё СЂРµРіРёРѕРЅС‹ Р±РµР· РєР°РїРёС‚Р°Р»СЊРЅРѕР№ РїРµСЂРµСЃС‚СЂРѕР№РєРё.
- **РџСЂРёРѕСЂРёС‚РµС‚ Supra-РёРЅСЃС‚СЂСѓРјРµРЅС‚РѕРІ:** С†РµР»РёРјСЃСЏ РІ Р±Р»РѕРєС‡РµР№РЅ Supra Рё РїСЂРё Р»СЋР±РѕР№ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё РёСЃРїРѕР»СЊР·СѓРµРј РѕС„РёС†РёР°Р»СЊРЅС‹Рµ SDK, CLI Рё РёРЅС„СЂР°СЃС‚СЂСѓРєС‚СѓСЂСѓ Supra.
- **Р”РІСѓС…СЃРµС‚РµРІРѕР№ СЂРµР¶РёРј РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ:** РІСЃРµ РёРЅСЃС‚СЂСѓРєС†РёРё, СЃРєСЂРёРїС‚С‹ Рё РєРѕРЅС„РёРіСѓСЂР°С†РёРё РіРѕС‚РѕРІРёРј С‚Р°Рє, С‡С‚РѕР±С‹ Р±РµР· РёР·РјРµРЅРµРЅРёР№ СЂР°Р±РѕС‚Р°Р»Рё РІ С‚РµСЃС‚РѕРІРѕР№ Рё РѕСЃРЅРѕРІРЅРѕР№ СЃРµС‚СЏС… Supra; С‚РµСЃС‚РЅРµС‚ СЃР»СѓР¶РёС‚ РїР»РѕС‰Р°РґРєРѕР№ СЂР°Р·СЂР°Р±РѕС‚РєРё, Р° Рє СЂРµР»РёР·Сѓ РєРѕРЅС‚СЂР°РєС‚С‹, РїР°СЂР°РјРµС‚СЂС‹ VRF Рё РєР°Р·РЅР°С‡РµР№СЃС‚РІР° РґРѕР»Р¶РЅС‹ Р±С‹С‚СЊ Р·Р°РґРµРїР»РѕРёРЅС‹ Рё РЅР° РјРµР№РЅРЅРµС‚Рµ.

## РЎРІРѕРґРєР° СЃС‚Р°С‚СѓСЃР° (РѕРєС‚СЏР±СЂСЊ 2025)
**Move-РєРѕРЅС‚СЂР°РєС‚С‹.** Р’ `SupraLottery/supra/move_workspace/lottery/sources/` РѕРїСѓР±Р»РёРєРѕРІР°РЅС‹ РјРѕРґСѓР»Рё СЏРґСЂР° (`Lottery.move`), СЂР°СѓРЅРґРѕРІ Рё СЌРєР·РµРјРїР»СЏСЂРѕРІ (`LotteryRounds.move`, `LotteryInstances.move`), Р°РІС‚РѕРїРѕРєСѓРїРєРё (`Autopurchase.move`), VIP/СЂРµС„РµСЂР°Р»РѕРє/РјР°РіР°Р·РёРЅР° (`Vip.move`, `Referrals.move`, `Store.move`), РіР»РѕР±Р°Р»СЊРЅРѕРіРѕ РґР¶РµРєРїРѕС‚Р° Рё РёСЃС‚РѕСЂРёРё (`Jackpot.move`, `History.move`), РѕРїРµСЂР°С‚РѕСЂРѕРІ Рё NFT-РЅР°РіСЂР°Рґ (`Operators.move`, `NftRewards.move`), Р° С‚Р°РєР¶Рµ РјРЅРѕРіРѕРїСѓР»РѕРІРѕРіРѕ РєР°Р·РЅР°С‡РµР№СЃС‚РІР° (`Treasury.move`, `TreasuryMulti.move`) Рё РјРёРіСЂР°С†РёР№ (`Migration.move`).
**РРЅС„СЂР°СЃС‚СЂСѓРєС‚СѓСЂР° VRF.** РџР°РєРµС‚С‹ `vrf_hub` Рё `lottery_factory` СЃРѕРґРµСЂР¶Р°С‚ VRF-С…Р°Р± СЃ С‚Р°Р±Р»РёС†Р°РјРё Р·Р°РїСЂРѕСЃРѕРІ Рё СЃРѕР±С‹С‚РёСЏРјРё (`VRFHub.move`, `Table.move`) Рё С„Р°Р±СЂРёРєСѓ РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂРѕРІ (`LotteryFactory.move`), РёСЃРїРѕР»СЊР·СѓРµРјСѓСЋ Р»РѕС‚РµСЂРµРµР№ Рё РјРѕРЅРёС‚РѕСЂРёРЅРіРѕРј.
**Python-СѓС‚РёР»РёС‚С‹.** РљР°С‚Р°Р»РѕРі `SupraLottery/supra/scripts/` РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ CLI (`cli.py`), FastAPI-СЃРµСЂРІРµСЂ (`api_server.py`) Рё СЃРµСЂРІРёСЃРЅС‹Рµ РїРѕРґРјРѕРґСѓР»Рё (`accounts/`, `progress/`, `realtime/`, `support/`), Р° С‚Р°РєР¶Рµ Р°РІС‚РѕРјР°С‚РёР·Р°С†РёСЋ РјРёРіСЂР°С†РёР№, РјРѕРЅРёС‚РѕСЂРёРЅРіР° Рё РѕС‚С‡С‘С‚РЅРѕСЃС‚Рё (`testnet_*.sh`, `lib/monitoring.py`, `testnet_monitor_*.py`).
**РўРµСЃС‚С‹.** Move-СЋРЅРёС‚-С‚РµСЃС‚С‹ СЂР°Р·РјРµС‰РµРЅС‹ РІ `SupraLottery/supra/move_workspace/lottery/tests/`, Python-С‚РµСЃС‚С‹ вЂ” РІ `SupraLottery/tests`, С„СЂРѕРЅС‚РµРЅРґ РїРѕРєСЂС‹С‚ Vitest-СЃРїРµС†РёС„РёРєР°С†РёСЏРјРё Рё РјРѕРє-СЂРµР¶РёРјР°РјРё РІ `frontend/src/testing/`.
**Р¤СЂРѕРЅС‚РµРЅРґ.** РђРєС‚СѓР°Р»СЊРЅС‹Рµ СЌРєСЂР°РЅС‹ СЃРѕР±СЂР°РЅС‹ РІ `frontend/src/features/` (Dashboard, Lotteries, Tickets, Wallet) СЃ РѕР±С‰РёРјРё СЃРѕСЃС‚РѕСЏРЅРёСЏРјРё (`frontend/src/app/`, `frontend/src/store/`) Рё РёРЅС‚РµРіСЂР°С†РёРµР№ СЃ Supra API (`frontend/src/api/supraClient.ts`).

## РќР°РїСЂР°РІР»РµРЅРёСЏ СЂР°Р±РѕС‚
### 1. РћРЅС‡РµР№РЅ-Р°СЂС…РёС‚РµРєС‚СѓСЂР° (VRF-С…Р°Р± Рё С„Р°Р±СЂРёРєР° Р»РѕС‚РµСЂРµР№)
**Р РµР°Р»РёР·РѕРІР°РЅРѕ**
- Move-РїР°РєРµС‚ СЂР°Р·РґРµР»С‘РЅ РЅР° СЃРїРµС†РёР°Р»РёР·РёСЂРѕРІР°РЅРЅС‹Рµ РјРѕРґСѓР»Рё: СЌРєР·РµРјРїР»СЏСЂС‹ (`LotteryInstances.move`), СЂР°СѓРЅРґС‹ (`LotteryRounds.move`), РёСЃС‚РѕСЂРёСЏ (`History.move`), РѕРїРµСЂР°С‚РѕСЂС‹ (`Operators.move`), Р°РІС‚РѕРїРѕРєСѓРїРєР° (`Autopurchase.move`), РіР»РѕР±Р°Р»СЊРЅС‹Р№ РґР¶РµРєРїРѕС‚ (`Jackpot.move`) Рё РјРёРіСЂР°С†РёРё (`Migration.move`), С‡С‚Рѕ РїРѕР·РІРѕР»СЏРµС‚ С…СЂР°РЅРёС‚СЊ СЃРѕСЃС‚РѕСЏРЅРёРµ РєР°Р¶РґРѕР№ Р»РѕС‚РµСЂРµРё РІ С‚Р°Р±Р»РёС†Р°С… Рё РѕР±СЂР°Р±Р°С‚С‹РІР°С‚СЊ Р¶РёР·РЅРµРЅРЅС‹Р№ С†РёРєР» СЂР°СѓРЅРґР° РЅРµР·Р°РІРёСЃРёРјРѕ.
- VRF-С…Р°Р± (`SupraLottery/supra/move_workspace/vrf_hub/sources/VRFHub.move`) РІРµРґС‘С‚ `HubState` СЃ РѕС‡РµСЂРµРґСЊСЋ Р·Р°РїСЂРѕСЃРѕРІ, whitelisting РѕС‚РїСЂР°РІРёС‚РµР»СЏ РєРѕР»Р±СЌРєР° Рё СЃРѕР±С‹С‚РёСЏРјРё СЂРµРіРёСЃС‚СЂР°С†РёРё/fulfill, Р° `vrf_hub::table` РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ РѕР±С‰РёР№ РїСЂРёРјРёС‚РёРІ С…СЂР°РЅРµРЅРёСЏ.
- `lottery::instances` СЃРёРЅС…СЂРѕРЅРёР·РёСЂСѓРµС‚СЃСЏ СЃ С„Р°Р±СЂРёРєРѕР№ (`lottery_factory::registry`), СЃРѕР·РґР°С‘С‚/Р°РєС‚РёРІРёСЂСѓРµС‚ Р»РѕС‚РµСЂРµРё, РїСѓР±Р»РёРєСѓРµС‚ СЃРѕР±С‹С‚РёСЏ Рё РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ view-С„СѓРЅРєС†РёРё `list_lottery_ids` Рё `list_active_lottery_ids` РґР»СЏ С„СЂРѕРЅС‚РµРЅРґР° Рё РјРѕРЅРёС‚РѕСЂРёРЅРіР°.
- `lottery::core_rounds` СѓРїСЂР°РІР»СЏРµС‚ РїРѕРєСѓРїРєРѕР№ Р±РёР»РµС‚РѕРІ, РїР»Р°РЅРёСЂРѕРІР°РЅРёРµРј Рё РёСЃРїРѕР»РЅРµРЅРёРµРј СЂРѕР·С‹РіСЂС‹С€РµР№, Р·Р°РїСЂР°С€РёРІР°РµС‚ СЃР»СѓС‡Р°Р№РЅРѕСЃС‚СЊ Сѓ VRF-С…Р°Р±Р°, РІР°Р»РёРґРёСЂСѓРµС‚ whitelisting Рё РѕР±РЅРѕРІР»СЏРµС‚ СЃРЅР°РїС€РѕС‚С‹; РёРЅС‚РµРіСЂР°С†РёСЏ СЃ `treasury_v1` Рё `treasury_multi` С„РёРєСЃРёСЂСѓРµС‚ РїРѕСЃС‚СѓРїР»РµРЅРёСЏ Рё РІС‹РїР»Р°С‚С‹.
- Р”РѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹Рµ РјРѕРґСѓР»Рё (`lottery::history`, `lottery::operators`, `lottery::autopurchase`, `lottery::vip`, `lottery::store`, `lottery::referrals`) СЂР°СЃС€РёСЂСЏСЋС‚ РѕС„С„С‡РµР№РЅ API: СЃРѕР±С‹С‚РёСЏ, Р°РіСЂРµРіРёСЂРѕРІР°РЅРЅС‹Рµ view-С„СѓРЅРєС†РёРё Рё Move-С‚РµСЃС‚С‹ РїРѕРєСЂС‹РІР°СЋС‚ РѕСЃРЅРѕРІРЅС‹Рµ СЃС†РµРЅР°СЂРёРё РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№ Рё Р°РґРјРёРЅРѕРІ.
- `lottery::migration` РїРµСЂРµРЅРѕСЃРёС‚ РґР°РЅРЅС‹Рµ РёР· `main_v2` РІ РЅРѕРІС‹Рµ С‚Р°Р±Р»РёС†С‹, РїСЂРѕРІРµСЂСЏРµС‚ РѕС‚СЃСѓС‚СЃС‚РІРёРµ РЅРµР·Р°РІРµСЂС€С‘РЅРЅС‹С… VRF-Р·Р°РїСЂРѕСЃРѕРІ Рё РѕР±РЅРѕРІР»СЏРµС‚ РєРѕРЅС„РёРіСѓСЂР°С†РёСЋ РґРѕР»РµР№.

**РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё**
- Р—Р°РІРµСЂС€РёС‚СЊ СЌРєСЃРїР»СѓР°С‚Р°С†РёРѕРЅРЅС‹Рµ СЃРєСЂРёРїС‚С‹ РґР»СЏ РјР°СЃСЃРѕРІРѕР№ РјРёРіСЂР°С†РёРё РёСЃС‚РѕСЂРёС‡РµСЃРєРёС… СЂРѕР·С‹РіСЂС‹С€РµР№ Рё СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёРё snapshot-С‚Р°Р±Р»РёС† (РёРЅС‚РµРіСЂР°С†РёСЏ СЃ `SupraLottery/supra/scripts/testnet_migration.sh`).
- РџРѕРґРіРѕС‚РѕРІРёС‚СЊ РїСѓР±Р»РёС‡РЅСѓСЋ СЃРїРµС†РёС„РёРєР°С†РёСЋ API view-С„СѓРЅРєС†РёР№ (РѕРїРёСЃР°РЅРёРµ РїРѕР»РµР·РЅРѕР№ РЅР°РіСЂСѓР·РєРё РґР»СЏ С„СЂРѕРЅС‚РµРЅРґР°/РёРЅС‚РµРіСЂР°С†РёР№), С‡С‚РѕР±С‹ СЃРЅРёР·РёС‚СЊ Р·Р°РІРёСЃРёРјРѕСЃС‚СЊ РѕС‚ С‡С‚РµРЅРёСЏ Move-РєРѕРґР°.
- Р Р°СЃС€РёСЂРёС‚СЊ РјРѕРЅРёС‚РѕСЂРёРЅРі VRF-С…Р°Р±Р° РјРµС‚СЂРёРєР°РјРё РІ Prometheus/Slack-Р°Р»РµСЂС‚Р°С… (РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊ СЃСѓС‰РµСЃС‚РІСѓСЋС‰РёРµ Р·Р°РіРѕС‚РѕРІРєРё `testnet_monitor_*.py`).
### 2. РљР°Р·РЅР°С‡РµР№СЃС‚РІРѕ Рё СЌРєРѕРЅРѕРјРёРєР°
**Р РµР°Р»РёР·РѕРІР°РЅРѕ**
- `lottery::core_treasury_v1` Рё `lottery::treasury_multi` СѓРїСЂР°РІР»СЏСЋС‚ РјРЅРѕРіРѕРїСѓР»РѕРІС‹Рј СЂР°СЃРїСЂРµРґРµР»РµРЅРёРµРј СЃСЂРµРґСЃС‚РІ: РЅР°СЃС‚СЂР°РёРІР°РµРјС‹Рµ РґРѕР»Рё РІ Р±Р°Р·РёСЃРЅС‹С… РїСѓРЅРєС‚Р°С…, СЃРѕР±С‹С‚РёСЏ `AllocationRecordedEvent`/`JackpotPaidEvent` Рё view-С„СѓРЅРєС†РёРё `get_lottery_summary`, `list_lottery_ids` РґРѕСЃС‚СѓРїРЅС‹ РѕС„С„С‡РµР№РЅ-СЃРµСЂРІРёСЃР°Рј.
- `lottery::core_rounds` Рё `lottery::jackpot` Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё С„РёРєСЃРёСЂСѓСЋС‚ РїРѕСЃС‚СѓРїР»РµРЅРёСЏ Рё РґР¶РµРєРїРѕС‚, РІС‹Р·С‹РІР°СЏ `treasury_multi::record_draw_internal` Рё `treasury_multi::distribute_jackpot_internal`, Р° Move-С‚РµСЃС‚С‹ РїРѕРєСЂС‹РІР°СЋС‚ РЅРѕСЂРјР°Р»СЊРЅС‹Рµ Рё РѕС‚СЂРёС†Р°С‚РµР»СЊРЅС‹Рµ СЃС†РµРЅР°СЂРёРё.
- `lottery::autopurchase`, `lottery::vip`, `lottery::store` Рё `lottery::referrals` СЂР°СЃС€РёСЂСЏСЋС‚ СЌРєРѕРЅРѕРјРёРєСѓ: СЃРѕР±С‹С‚РёСЏ С„РёРєСЃРёСЂСѓСЋС‚ РґРµРїРѕР·РёС‚С‹, РїРѕРґРїРёСЃРєРё Рё РїСЂРѕРґР°Р¶Рё, Р°РіСЂРµРіРёСЂРѕРІР°РЅРЅС‹Рµ view-С„СѓРЅРєС†РёРё РІРѕР·РІСЂР°С‰Р°СЋС‚ СЃРІРѕРґРєРё РїРѕ Р»РѕС‚РµСЂРµСЏРј Рё РёРіСЂРѕРєР°Рј.
- CLI Рё Python-СЃРєСЂРёРїС‚С‹ (`SupraLottery/supra/scripts/configure_treasury_distribution.py`, `configure_vrf_gas.py`, `testnet_migration.sh`) Р°РІС‚РѕРјР°С‚РёР·РёСЂСѓСЋС‚ РЅР°СЃС‚СЂРѕР№РєСѓ РґРѕР»РµР№, whitelisting Рё РјРёРіСЂР°С†РёРё.

**РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё**
- РЎРѕРіР»Р°СЃРѕРІР°С‚СЊ СЃ РІР»Р°РґРµР»СЊС†РµРј РїСЂРѕРґСѓРєС‚Р° РєРѕРЅРµС‡РЅС‹Рµ Р·РЅР°С‡РµРЅРёСЏ РґРѕР»РµР№ Рё Р·Р°РґРѕРєСѓРјРµРЅС‚РёСЂРѕРІР°С‚СЊ РёС… РІ `docs/adr/treasury-multi-pool.md`.
- Р”РѕР±Р°РІРёС‚СЊ РѕС„С„С‡РµР№РЅ-РґР°С€Р±РѕСЂРґС‹ РїРѕ СЃРѕР±С‹С‚РёСЏРј РєР°Р·РЅР°С‡РµР№СЃС‚РІР° (РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊ `SupraLottery/supra/scripts/testnet_monitor_prometheus.py` Рё `testnet_monitor_slack.py`).
- РџСЂРѕРІРµСЃС‚Рё Р°СѓРґРёС‚ СѓС‡С‘С‚РЅС‹С… Р·Р°РїРёСЃРµР№ РїРѕР»СѓС‡Р°С‚РµР»РµР№ Рё Р·Р°РјРѕСЂРѕР·РєРё primary store, С‡С‚РѕР±С‹ РїРѕРґС‚РІРµСЂРґРёС‚СЊ СЃРѕРѕС‚РІРµС‚СЃС‚РІРёРµ РїРѕР»РёС‚РёРєР°Рј Supra FA.
### 3. РђРєРєР°СѓРЅС‚С‹, РїСЂРѕРіСЂРµСЃСЃ Рё РїР»Р°С‚С„РѕСЂРјР° РґР°РЅРЅС‹С…
**Р РµР°Р»РёР·РѕРІР°РЅРѕ**
- FastAPI-Р±СЌРєРµРЅРґ (`SupraLottery/supra/scripts/api_server.py`) Р°РіСЂРµРіРёСЂСѓРµС‚ СЂРѕСѓС‚РµСЂС‹ `accounts`, `progress`, `realtime`, `support`; РјРѕРґСѓР»Рё РёСЃРїРѕР»СЊР·СѓСЋС‚ SQLAlchemy Рё Pydantic РґР»СЏ СѓРїСЂР°РІР»РµРЅРёСЏ РїСЂРѕС„РёР»СЏРјРё, РїСЂРѕРіСЂРµСЃСЃРѕРј Рё СѓРІРµРґРѕРјР»РµРЅРёСЏРјРё.
- Python-С‚РµСЃС‚С‹ (`SupraLottery/tests/test_accounts.py`, `test_progress.py`, `test_support.py`, `test_api_server.py`) РїРѕРєСЂС‹РІР°СЋС‚ CRUD-РѕРїРµСЂР°С†РёРё, РІР°Р»РёРґР°С†РёСЋ Рё РєРµС€РёСЂРѕРІР°РЅРёРµ/WS-РѕР±РЅРѕРІР»РµРЅРёСЏ API.
- Р¤СЂРѕРЅС‚РµРЅРґ РёСЃРїРѕР»СЊР·СѓРµС‚ TypeScript-РєР»РёРµРЅС‚ (`frontend/src/api/supraClient.ts`) Рё РіР»РѕР±Р°Р»СЊРЅС‹Рµ СЃРѕСЃС‚РѕСЏРЅРёСЏ (`frontend/src/store/`) РґР»СЏ РѕС‚РѕР±СЂР°Р¶РµРЅРёСЏ РїСЂРѕС„РёР»СЏ, РїСЂРѕРіСЂРµСЃСЃР° Рё СЃС‚Р°С‚СѓСЃРѕРІ Р»РѕС‚РµСЂРµР№.

**РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё**
- Р—Р°РІРµСЂС€РёС‚СЊ РїСЂРѕРµРєС‚РёСЂРѕРІР°РЅРёРµ РїРѕСЃС‚РѕСЏРЅРЅРѕРіРѕ С…СЂР°РЅРёР»РёС‰Р° (PostgreSQL) Рё РІС‹РЅРµСЃС‚Рё РЅР°СЃС‚СЂРѕР№РєРё РїРѕРґРєР»СЋС‡РµРЅРёР№ РёР· `.env`/РїРµСЂРµРјРµРЅРЅС‹С… РѕРєСЂСѓР¶РµРЅРёСЏ РІ РѕС‚РґРµР»СЊРЅС‹Р№ РєРѕРЅС„РёРі.
- РџРѕРґРіРѕС‚РѕРІРёС‚СЊ РјРёРіСЂР°С†РёРё Р‘Р” Рё РґРѕРєСѓРјРµРЅС‚Р°С†РёСЋ REST/WS API (OpenAPI-СЃРїРµРєР° + СЃС…РµРјС‹ СЃРѕР±С‹С‚РёР№), С‡С‚РѕР±С‹ РѕР±Р»РµРіС‡РёС‚СЊ РёРЅС‚РµРіСЂР°С†РёСЋ СЃС‚РѕСЂРѕРЅРЅРёС… СЃРµСЂРІРёСЃРѕРІ.
- РћР±РЅРѕРІРёС‚СЊ С„СЂРѕРЅС‚РµРЅРґ-РґРёР·Р°Р№РЅ РїРѕСЃР»Рµ СЃРѕРіР»Р°СЃРѕРІР°РЅРёСЏ РјР°РєРµС‚Р° Figma Рё СЃРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°С‚СЊ РіР°Р№РґС‹ РІ `frontend/README.md`.
### 4. РџСЂРѕР·СЂР°С‡РЅРѕСЃС‚СЊ Рё С‡РµСЃС‚РЅРѕСЃС‚СЊ
- РЎРѕР±РёСЂР°С‚СЊ СЃРѕР±С‹С‚РёСЏ VRF, С…СЌС€Рё payload Рё СЃРЅР°РїС€РѕС‚С‹ whitelisting С‡РµСЂРµР· РІС‹РґРµР»РµРЅРЅС‹Р№ СЃРµСЂРІРёСЃ-РёРЅР¶РµСЃС‚РµСЂ.
- РћС‚РєСЂС‹С‚СЊ Р°СѓРґРёС‚-СЌРЅРґРїРѕРёРЅС‚С‹, РєРѕС‚РѕСЂС‹Рµ РѕС‚РґР°СЋС‚ РІРѕСЃРїСЂРѕРёР·РІРѕРґРёРјС‹Рµ РґР°РЅРЅС‹Рµ СЂРѕР·С‹РіСЂС‹С€РµР№ РЅР° С„СЂРѕРЅС‚РµРЅРґ.
- РџРѕСЃС‚СЂРѕРёС‚СЊ РёРЅС‚РµСЂС„РµР№СЃ В«РџР°РЅРµР»СЊ С‡РµСЃС‚РЅРѕСЃС‚РёВ», РґРµРјРѕРЅСЃС‚СЂРёСЂСѓСЋС‰РёР№ РіРµРЅРµСЂР°С†РёСЋ seed, РґРѕРєР°Р·Р°С‚РµР»СЊСЃС‚РІРѕ СЃР»СѓС‡Р°Р№РЅРѕСЃС‚Рё Рё РІС‹Р±РѕСЂ РїРѕР±РµРґРёС‚РµР»СЏ.
- РҐСЂР°РЅРёС‚СЊ Р°СЂС‚РµС„Р°РєС‚С‹ РґР»СЏ РґРѕР»РіРѕСЃСЂРѕС‡РЅРѕР№ РїСЂРѕРІРµСЂРєРё Рё СЂРµРіСѓР»СЏС‚РѕСЂРЅС‹С… Р·Р°РїСЂРѕСЃРѕРІ.
- Python-СѓС‚РёР»РёС‚Р° РјРѕРЅРёС‚РѕСЂРёРЅРіР° (`supra.scripts.lib.monitoring`) СѓР¶Рµ СЃРѕР±РёСЂР°РµС‚ СЃРѕСЃС‚РѕСЏРЅРёРµ VRF-С…Р°Р±Р°, РєРѕР»Р»РµРєС†РёРё РјСѓР»СЊС‚Рё-Р»РѕС‚РµСЂРµР№, РјРЅРѕРіРѕРїСѓР»РѕРІРѕРіРѕ РєР°Р·РЅР°С‡РµР№СЃС‚РІР° Рё С‚РµРїРµСЂСЊ РІРєР»СЋС‡Р°РµС‚ Р°РІС‚РѕРїРѕРєСѓРїРєСѓ: РІ РѕС‚С‡С‘С‚Рµ `/status` РїРѕСЏРІР»СЏРµС‚СЃСЏ СЂР°Р·РґРµР» СЃ СЃСѓРјРјР°СЂРЅС‹РјРё Р±Р°Р»Р°РЅСЃР°РјРё Рё СЃРїРёСЃРєРѕРј РёРіСЂРѕРєРѕРІ РїРѕ РєР°Р¶РґРѕР№ Р»РѕС‚РµСЂРµРµ.
- РўРѕС‚ Р¶Рµ РѕС‚С‡С‘С‚ СЂР°СЃС€РёСЂРµРЅ СЃРµРєС†РёРµР№ `metadata`: РјРѕРЅРёС‚РѕСЂРёРЅРі РІС‹Р·С‹РІР°РµС‚ `lottery::metadata::list_lottery_ids` Рё `get_metadata`, РїРѕСЌС‚РѕРјСѓ С„СЂРѕРЅС‚РµРЅРґ Рё Supra AutoFi РїРѕР»СѓС‡Р°СЋС‚ РІРёС‚СЂРёРЅРЅС‹Рµ РѕРїРёСЃР°РЅРёСЏ СЂРѕР·С‹РіСЂС‹С€РµР№ РёР· РѕРґРЅРѕРіРѕ РёСЃС‚РѕС‡РЅРёРєР° Р±РµР· РґСѓР±Р»РёСЂРѕРІР°РЅРёСЏ СЃ CMS.
- РўРѕС‚ Р¶Рµ РѕС‚С‡С‘С‚ СЂР°СЃС€РёСЂРµРЅ СЃРµРєС†РёРµР№ `operators`: РјРѕРЅРёС‚РѕСЂРёРЅРі С‡РёС‚Р°РµС‚ `lottery::operators::list_lottery_ids`, `get_owner` Рё `list_operators`, С‡С‚Рѕ РїРѕР·РІРѕР»СЏРµС‚ Supra AutoFi, Р°РґРјРёРЅ-РїР°РЅРµР»Рё Рё С„СЂРѕРЅС‚РµРЅРґСѓ РІРёРґРµС‚СЊ РѕС‚РІРµС‚СЃС‚РІРµРЅРЅС‹С… Рё РґРµР»РµРіРёСЂРѕРІР°РЅРЅС‹С… РѕРїРµСЂР°С‚РѕСЂРѕРІ РїРѕ РєР°Р¶РґРѕР№ Р»РѕС‚РµСЂРµРµ.
- РўРѕС‚ Р¶Рµ РѕС‚С‡С‘С‚ СЂР°СЃС€РёСЂРµРЅ Р±Р»РѕРєРѕРј `referrals`: РґР»СЏ РєР°Р¶РґРѕР№ Р»РѕС‚РµСЂРµРё РІРѕР·РІСЂР°С‰Р°СЋС‚СЃСЏ РєРѕРЅС„РёРіСѓСЂР°С†РёСЏ Р±РѕРЅСѓСЃРѕРІ Рё Р°РіСЂРµРіРёСЂРѕРІР°РЅРЅС‹Рµ РІС‹РїР»Р°С‚С‹, С‡С‚Рѕ СѓРїСЂРѕС‰Р°РµС‚ РЅР°СЃС‚СЂРѕР№РєСѓ growth-РєР°РјРїР°РЅРёР№ Рё РєРѕРЅС‚СЂРѕР»СЊ РѕРїРµСЂР°С†РёРѕРЅРЅРѕРіРѕ РїСѓР»Р°.
- Р”РѕР±Р°РІР»РµРЅ СЂР°Р·РґРµР» `vip`: РјРѕРЅРёС‚РѕСЂРёРЅРі РїРѕРґС‚СЏРіРёРІР°РµС‚ `lottery::vip::get_lottery_summary` Рё `list_players`, С‡С‚РѕР±С‹ С„СЂРѕРЅС‚РµРЅРґ Рё Supra AutoFi РІРёРґРµР»Рё РІС‹СЂСѓС‡РєСѓ РїРѕРґРїРёСЃРѕРє, Р°РєС‚РёРІРЅС‹С… СѓС‡Р°СЃС‚РЅРёРєРѕРІ Рё СЃРїРёСЃРѕРє Р°РґСЂРµСЃРѕРІ Р±РµР· РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹С… Р·Р°РїСЂРѕСЃРѕРІ.
- РњРѕРґСѓР»СЊ `supra.scripts.lib.vrf_audit` Рё РєРѕРјР°РЅРґР° CLI `vrf-audit` РІС‹РіСЂСѓР¶Р°СЋС‚ СЃРѕР±С‹С‚РёСЏ `DrawRequestIssued/DrawFulfilled` Рё `RandomnessRequested/RandomnessFulfilled`, Р° REST-СЌРЅРґРїРѕРёРЅС‚ `/lotteries/{id}/vrf-log` РѕС‚РґР°С‘С‚ Р°РіСЂРµРіРёСЂРѕРІР°РЅРЅС‹Р№ РѕС‚С‡С‘С‚ РґР»СЏ Р±СѓРґСѓС‰РµР№ РїР°РЅРµР»Рё С‡РµСЃС‚РЅРѕСЃС‚Рё.
- Р¤СЂРѕРЅС‚РµРЅРґ РїРѕР»СѓС‡РёР» СЃС‚СЂР°РЅРёС†Сѓ `/fairness`, РєРѕС‚РѕСЂР°СЏ РѕС‚РѕР±СЂР°Р¶Р°РµС‚ VRF-Р¶СѓСЂРЅР°Р», СЃРЅРµРїС€РѕС‚С‹ СЂР°СѓРЅРґРѕРІ Рё СЃРѕР±С‹С‚РёСЏ С…Р°Р±Р° РґР»СЏ РІС‹Р±СЂР°РЅРЅРѕР№ Р»РѕС‚РµСЂРµРё СЃ РЅР°СЃС‚СЂРѕР№РєРѕР№ Р»РёРјРёС‚Р° СЃРѕР±С‹С‚РёР№.
- РРЅС‚РµСЂС„РµР№СЃ РїР°РЅРµР»Рё С‡РµСЃС‚РЅРѕСЃС‚Рё РїРѕРґРґРµСЂР¶РёРІР°РµС‚ С„РёР»СЊС‚СЂР°С†РёСЋ РїРѕ С‚РёРїСѓ СЃРѕР±С‹С‚РёСЏ Рё РїРѕРёСЃРєРѕРІРѕРјСѓ Р·Р°РїСЂРѕСЃСѓ, С‡С‚Рѕ РѕР±Р»РµРіС‡Р°РµС‚ Р°РЅР°Р»РёР· Р·Р°РїСЂРѕСЃРѕРІ VRF Рё СЃРѕРїРѕСЃС‚Р°РІР»РµРЅРёРµ РѕС‚РІРµС‚РѕРІ.

### 5. Real-time РєРѕРјРјСѓРЅРёРєР°С†РёРё Рё СѓРІРµРґРѕРјР»РµРЅРёСЏ
- Р’РЅРµРґСЂРёС‚СЊ СЃР»РѕР№ WebSocket/SSE РґР»СЏ Р»РѕР±Р±Рё-С‡Р°С‚Р°, РѕР±СЉСЏРІР»РµРЅРёР№ Рѕ Р»РѕС‚РµСЂРµСЏС… Рё С‚СЂР°РЅСЃР»СЏС†РёРё СЂРµР·СѓР»СЊС‚Р°С‚РѕРІ.
- РҐСЂР°РЅРёС‚СЊ РёСЃС‚РѕСЂРёСЋ С‡Р°С‚Р° СЃ РїРѕР»РёС‚РёРєР°РјРё РјРѕРґРµСЂР°С†РёРё Рё СЃСЂРѕРєР°РјРё С…СЂР°РЅРµРЅРёСЏ, Р·Р°РґРѕРєСѓРјРµРЅС‚РёСЂРѕРІР°РЅРЅС‹РјРё РІ `docs/policies/chat-moderation.md`.
- РћС‚РѕР±СЂР°Р¶Р°С‚СЊ СѓРІРµРґРѕРјР»РµРЅРёСЏ РЅР° С„СЂРѕРЅС‚РµРЅРґРµ Рё РёРЅС‚РµРіСЂРёСЂРѕРІР°С‚СЊ РјРµС…Р°РЅРёРєРё С€Р°СЂРёРЅРіР° СЂРµР·СѓР»СЊС‚Р°С‚РѕРІ РІ СЃРѕС†СЃРµС‚Рё.
- Р РµР°Р»РёР·РѕРІР°РЅ Р±Р°Р·РѕРІС‹Р№ СЃРµСЂРІРёСЃ `/chat`: REST-СЌРЅРґРїРѕРёРЅС‚С‹ РґР»СЏ СЃРѕРѕР±С‰РµРЅРёР№ Рё РѕР±СЉСЏРІР»РµРЅРёР№, SQLAlchemy-С‚Р°Р±Р»РёС†С‹, WebSocket `/chat/ws/{room}` Рё
  С‚РµСЃС‚С‹ `test_chat_rest_roundtrip`/`test_websocket_receives_broadcast`, РїРѕРґС‚РІРµСЂР¶РґР°СЋС‰РёРµ СЃРѕС…СЂР°РЅРµРЅРёРµ Рё push-СЂР°СЃСЃС‹Р»РєСѓ.
- РќР° РґР°С€Р±РѕСЂРґРµ РґРѕР±Р°РІР»РµРЅР° РїР°РЅРµР»СЊ С‡Р°С‚Р° Рё РѕР±СЉСЏРІР»РµРЅРёР№: С„СЂРѕРЅС‚РµРЅРґ Р·Р°РіСЂСѓР¶Р°РµС‚ РґР°РЅРЅС‹Рµ С‡РµСЂРµР· `/chat/messages`/`/chat/announcements`, РІ Supra-СЂРµР¶РёРјРµ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё РїРѕРґРєР»СЋС‡Р°РµС‚СЃСЏ WebSocket, Р° РІ mock-СЂРµР¶РёРјРµ СЂР°Р±РѕС‚Р°РµС‚ Р»РѕРєР°Р»СЊРЅРѕРµ С…СЂР°РЅРёР»РёС‰Рµ.

### 6. NFT-СЃС‚СЂР°С‚РµРіРёСЏ Рё РЅР°РіСЂР°РґС‹
- РћРїСЂРµРґРµР»РёС‚СЊ, РєР°РєРёРµ NFT РІС‹РїСѓСЃРєР°РµРј СЃР°РјРё, Р° РєР°РєРёРµ Р±РµСЂС‘Рј Сѓ РїР°СЂС‚РЅС‘СЂРѕРІ (РЅР°РїСЂРёРјРµСЂ, Crystara), Рё Р·Р°С„РёРєСЃРёСЂРѕРІР°С‚СЊ РїРѕРґС…РѕРґ РІ `docs/adr/nft-strategy.md`.
- РџСЂРё РЅРµРѕР±С…РѕРґРёРјРѕСЃС‚Рё СЂРµР°Р»РёР·РѕРІР°С‚СЊ Move-РјРѕРґСѓР»Рё РґР»СЏ РІС‹РїСѓСЃРєР° С‚СЂРѕС„РµРµРІ РїРѕР±РµРґРёС‚РµР»РµР№ Рё СЃРІСЏР·Р°С‚СЊ РёС… СЃ СЂРµР·СѓР»СЊС‚Р°С‚Р°РјРё Р»РѕС‚РµСЂРµР№.
- РЎРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°С‚СЊ РјРµС‚Р°РґР°РЅРЅС‹Рµ РЅР° Р±СЌРєРµРЅРґРµ Рё РѕС‚СЂРёСЃРѕРІС‹РІР°С‚СЊ РІС‹Р±РѕСЂ Р°РІР°С‚Р°СЂРѕРІ/С‚СЂРѕС„РµРµРІ РІ РїСЂРѕС„РёР»СЏС… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№.
- РњРѕРґСѓР»СЊ `lottery_rewards::rewards_nft` СѓР¶Рµ РІС‹РїСѓСЃРєР°РµС‚ СѓРЅРёРєР°Р»СЊРЅС‹Рµ Р±РµР№РґР¶Рё РїРѕР±РµРґРёС‚РµР»РµР№: СЃРѕР±С‹С‚РёСЏ `BadgeMintedEvent`/`BadgeBurnedEvent`, view-С„СѓРЅРєС†РёРё `has_badge`/`list_badges`/`get_badge` Рё Move-С‚РµСЃС‚С‹ РїРѕРґС‚РІРµСЂР¶РґР°СЋС‚ РєРѕСЂСЂРµРєС‚РЅРѕСЃС‚СЊ РјРёРЅС‚Р°, РѕРіСЂР°РЅРёС‡РµРЅРёРµ РїРѕ Р°РґРјРёРЅРёСЃС‚СЂР°С‚РѕСЂСѓ Рё РІРѕР·РјРѕР¶РЅРѕСЃС‚СЊ СЂСѓС‡РЅРѕРіРѕ СЃР¶РёРіР°РЅРёСЏ РІР»Р°РґРµР»СЊС†РµРј.

### 7. РџРѕРґРґРµСЂР¶РєР°, РєРѕРЅС‚РµРЅС‚ Рё Р»РѕРєР°Р»РёР·Р°С†РёСЏ
- РћР±РЅРѕРІРёС‚СЊ РёРЅС„СЂР°СЃС‚СЂСѓРєС‚СѓСЂСѓ i18n, С‡С‚РѕР±С‹ РїРѕРґРґРµСЂР¶РёРІР°С‚СЊ РЅРµСЃРєРѕР»СЊРєРѕ Р»РѕРєР°Р»РµР№ Рё РґРёРЅР°РјРёС‡РµСЃРєРёР№ РєРѕРЅС‚РµРЅС‚.
- РЎРѕР·РґР°С‚СЊ С†РµРЅС‚СЂ РїРѕРґРґРµСЂР¶РєРё СЃ FAQ, С„РѕСЂРјРѕР№ С‚РёРєРµС‚РѕРІ Рё СЂРµРґР°РєС†РёРѕРЅРЅС‹РјРё РіР°Р№РґР°РјРё.
- РџСЂРµРґРѕСЃС‚Р°РІРёС‚СЊ РёРЅСЃС‚СЂСѓРјРµРЅС‚С‹ РґР»СЏ РёР·РІР»РµС‡РµРЅРёСЏ РїРµСЂРµРІРѕРґРѕРІ Рё РІС‹РєР»Р°РґРєРё РєРѕРЅС‚РµРЅС‚Р° (`frontend/scripts/extract-translations.ts`).
- Р РµР°Р»РёР·РѕРІР°РЅ Р±Р°Р·РѕРІС‹Р№ С†РµРЅС‚СЂ РїРѕРґРґРµСЂР¶РєРё: SQLAlchemy-С‚Р°Р±Р»РёС†С‹ СЃС‚Р°С‚РµР№ Рё С‚РёРєРµС‚РѕРІ, REST-СЌРЅРґРїРѕРёРЅС‚С‹ `/support/*`, С‚РµСЃС‚С‹ СЃРµСЂРІРёСЃР° Рё API.
- Р’РЅРµРґСЂРµРЅС‹ `i18next` Рё `react-i18next`, РґРѕР±Р°РІР»РµРЅ ADR `docs/adr/i18n-cms.md`, С…СѓРє `useI18n` РїРѕСЃС‚СЂРѕРµРЅ РЅР° СЃС‚Р°РЅРґР°СЂС‚РЅРѕРј API, Р° СЃРєСЂРёРїС‚ `pnpm run i18n:extract` РІС‹РіСЂСѓР¶Р°РµС‚ СЃР»РѕРІР°СЂРё РІ `frontend/public/locales/*`.

### 8. РРЅС‚РµРіСЂР°С†РёСЏ РґРёР·Р°Р№РЅ-СЃРёСЃС‚РµРјС‹
- РџРµСЂРµРЅРµСЃС‚Рё РїСЂРµРґСЃС‚РѕСЏС‰РёР№ Figma-РґРёР·Р°Р№РЅ РІ РїРµСЂРµРёСЃРїРѕР»СЊР·СѓРµРјС‹Рµ С‚РѕРєРµРЅС‹ (С†РІРµС‚, С‚РёРїРѕРіСЂР°С„РёРєР°, РѕС‚СЃС‚СѓРїС‹) Рё РїСЂРёРјРµРЅРёС‚СЊ РёС… РєРѕ РІСЃРµР№ Р±РёР±Р»РёРѕС‚РµРєРµ React-РєРѕРјРїРѕРЅРµРЅС‚РѕРІ.
- РџРµСЂРµСЃРѕР±СЂР°С‚СЊ Р±Р°Р·РѕРІС‹Рµ layout-РєРѕРјРїРѕРЅРµРЅС‚С‹, СЃС‚СЂР°РЅРёС†С‹ РєР°С‚Р°Р»РѕРіР° Рё РґРµС‚Р°Р»СЊРЅС‹Рµ РєР°СЂС‚РѕС‡РєРё Р»РѕС‚РµСЂРµР№ РїРѕ СЃРїРµС†РёС„РёРєР°С†РёРё Figma.
- РћР±РЅРѕРІРёС‚СЊ РёСЃС‚РѕСЂРёРё Storybook Рё РІРёР·СѓР°Р»СЊРЅС‹Рµ СЂРµРіСЂРµСЃСЃРёРѕРЅРЅС‹Рµ С‚РµСЃС‚С‹, С‡С‚РѕР±С‹ Р·Р°С„РёРєСЃРёСЂРѕРІР°С‚СЊ РЅРѕРІС‹Р№ РіР°Р№Рґ.
- РџРѕРґРіРѕС‚РѕРІРёС‚СЊ `docs/design-system.md` СЃ РїСЂР°РІРёР»Р°РјРё РёСЃРїРѕР»СЊР·РѕРІР°РЅРёСЏ РґР»СЏ Р±СѓРґСѓС‰РёС… РєРѕРјРїРѕРЅРµРЅС‚РѕРІ.

### 9. Р‘РµР·РѕРїР°СЃРЅРѕСЃС‚СЊ, РєРѕРјРїР»Р°РµРЅСЃ Рё РѕРїРµСЂР°С†РёРё
- РћРїСЂРµРґРµР»РёС‚СЊ РѕР¶РёРґР°РЅРёСЏ KYC/AML Рё СЂРµРіСѓР»СЏС‚РѕСЂРЅС‹Рµ РѕРіСЂР°РЅРёС‡РµРЅРёСЏ РґР»СЏ РјСѓР»СЊС‚Рё-Р»РѕС‚РµСЂРµР№ (`docs/adr/compliance.md`).
- Р—Р°РїР»Р°РЅРёСЂРѕРІР°С‚СЊ РІРЅРµС€РЅРёРµ Р°СѓРґРёС‚С‹ Move-РєРѕРЅС‚СЂР°РєС‚РѕРІ Рё Р±СЌРєРµРЅРґР° Рё РѕС„РѕСЂРјРёС‚СЊ РїР»Р°РЅ РІ `docs/security/audit_plan.md`.
- РќР°СЃС‚СЂРѕРёС‚СЊ runbookвЂ™Рё СЂРµР°РіРёСЂРѕРІР°РЅРёСЏ РЅР° РёРЅС†РёРґРµРЅС‚С‹, РїСЂРѕС†РµРґСѓСЂС‹ РѕС‚Р·С‹РІРѕРІ РєР»СЋС‡РµР№ Рё РїСЂРѕРІРµСЂРєРё РІ CI (СЃС‚Р°С‚РёС‡РµСЃРєРёР№ Р°РЅР°Р»РёР·, СЃРєР°РЅРёСЂРѕРІР°РЅРёРµ Р·Р°РІРёСЃРёРјРѕСЃС‚РµР№).
- РЈСЃРёР»РёС‚СЊ РјРѕРЅРёС‚РѕСЂРёРЅРі VRF-С…Р°Р±Р°, Р±Р°Р»Р°РЅСЃРѕРІ РєР°Р·РЅР°С‡РµР№СЃС‚РІР° Рё real-time СЃРµСЂРІРёСЃРѕРІ (РґР°С€Р±РѕСЂРґС‹, Р°Р»РµСЂС‚С‹).
- РџРѕРґРіРѕС‚РѕРІРёС‚СЊ РґРІСѓСЃРµС‚РµРІРѕР№ РїР°Р№РїР»Р°Р№РЅ РґРµРїР»РѕСЏ: РїРѕРґРґРµСЂР¶РёРІР°С‚СЊ РѕС‚РґРµР»СЊРЅС‹Рµ РїСЂРѕС„РёР»Рё Supra CLI (`testnet` Рё `mainnet`), СЃРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°РЅРЅС‹Рµ РІРµСЂСЃРёРё РїР°РєРµС‚РѕРІ Рё runbookвЂ™Рё РїРµСЂРµРєР»СЋС‡РµРЅРёСЏ РѕРєСЂСѓР¶РµРЅРёР№, РІРєР»СЋС‡Р°СЏ whitelisting Рё СѓРїСЂР°РІР»РµРЅРёРµ РєР»СЋС‡Р°РјРё.

### 10. РђРЅР°Р»РёС‚РёРєР° Рё СЂРѕСЃС‚
- РЎРѕР±РёСЂР°С‚СЊ РїСЂРѕРґСѓРєС‚РѕРІС‹Рµ РјРµС‚СЂРёРєРё (DAU, РїРѕРєСѓРїРєРё Р±РёР»РµС‚РѕРІ, РІС‹РїРѕР»РЅРµРЅРёРµ С‡РµРє-Р»РёСЃС‚РѕРІ, СЌС„С„РµРєС‚РёРІРЅРѕСЃС‚СЊ СЂРµС„РµСЂР°Р»РѕРє) Рё РѕРїРёСЃР°С‚СЊ РёС… РІ `docs/adr/analytics.md`.
- РџРѕС‚РѕРє СЃРѕР±С‹С‚РёР№ СЃ Р±СЌРєРµРЅРґР° Рё С„СЂРѕРЅС‚РµРЅРґР° РЅР°РїСЂР°РІРёС‚СЊ РІ Р°РЅР°Р»РёС‚РёС‡РµСЃРєРѕРµ С…СЂР°РЅРёР»РёС‰Рµ (ClickHouse/BigQuery) СЃ РґР°С€Р±РѕСЂРґР°РјРё (Metabase/Superset).
- Р РµР°Р»РёР·РѕРІР°С‚СЊ growth-РјРµС…Р°РЅРёРєРё: Р±РёР»РµС‚С‹ Р·Р° С‡РµРє-Р»РёСЃС‚, СЂРµС„РµСЂР°Р»СЊРЅС‹Рµ Рё С‚РµСЃС‚РµСЂСЃРєРёРµ РЅР°РіСЂР°РґС‹, РјР°РіР°Р·РёРЅ РјРѕРЅРµС‚РёР·Р°С†РёРё (NFT РёР»Рё VIP-РїРѕРґРїРёСЃРєРё). РђРІС‚РѕРїРѕРєСѓРїРєР° Р±РёР»РµС‚РѕРІ СЂРµР°Р»РёР·РѕРІР°РЅР° РЅР° РѕРЅС‡РµР№РЅ-СѓСЂРѕРІРЅРµ (`lottery::autopurchase`) Рё РіРѕС‚РѕРІР° Рє РёРЅС‚РµРіСЂР°С†РёРё СЃ РѕС„С„С‡РµР№РЅ-СЃРµСЂРІРёСЃР°РјРё Рё UX.
- `lottery::referrals` СѓР¶Рµ СЂРµР°Р»РёР·СѓРµС‚ СЂРµС„РµСЂР°Р»СЊРЅСѓСЋ РїСЂРѕРіСЂР°РјРјСѓ: РєРѕРЅС„РёРіСѓСЂР°С†РёСЋ Р±РѕРЅСѓСЃРѕРІ РЅР° Р»РѕС‚РµСЂРµСЋ, СЂРµРіРёСЃС‚СЂР°С†РёСЋ СЃРІСЏР·РµР№ РёРіСЂРѕРє в†’ СЂРµС„РµСЂРµСЂ, Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРёРµ РІС‹РїР»Р°С‚С‹ РёР· РѕРїРµСЂР°С†РёРѕРЅРЅРѕРіРѕ РїСѓР»Р° Рё view-СЃС‚Р°С‚РёСЃС‚РёРєСѓ РґР»СЏ РјРѕРЅРёС‚РѕСЂРёРЅРіР°; РїРѕРєСЂС‹С‚ Move-С‚РµСЃС‚Р°РјРё `referrals_tests`.
- `lottery::store` РґРѕР±Р°РІР»СЏРµС‚ РјР°РіР°Р·РёРЅ С†РёС„СЂРѕРІС‹С… С‚РѕРІР°СЂРѕРІ: Р°РґРјРёРЅРёСЃС‚СЂР°С‚РѕСЂ СѓРїСЂР°РІР»СЏРµС‚ Р°СЃСЃРѕСЂС‚РёРјРµРЅС‚РѕРј С‡РµСЂРµР· `upsert_item` Рё `set_availability`, РёРіСЂРѕРєРё РїРѕРєСѓРїР°СЋС‚ С‚РѕРІР°СЂС‹ РЅР°РїСЂСЏРјСѓСЋ РёР· РєРѕС€РµР»СЊРєР° С‡РµСЂРµР· `purchase`, Р° РІС‹СЂСѓС‡РєР° РѕС‚СЂР°Р¶Р°РµС‚СЃСЏ РІ РѕРїРµСЂР°С†РёРѕРЅРЅРѕРј РїСѓР»Рµ (`treasury_multi::record_operations_income_internal`). View-С„СѓРЅРєС†РёРё `list_lottery_ids`, `list_item_ids` Рё `get_lottery_summary` РѕР±РµСЃРїРµС‡РёРІР°СЋС‚ РјРѕРЅРёС‚РѕСЂРёРЅРі РєР°С‚Р°Р»РѕРіР°; Move-С‚РµСЃС‚С‹ `store_tests` РїРѕРєСЂС‹РІР°СЋС‚ СЃРїРёСЃР°РЅРёРµ Р·Р°РїР°СЃРѕРІ Рё Р·Р°С‰РёС‚Сѓ РѕС‚ РїРµСЂРµРїСЂРѕРґР°Р¶Рё.
- `lottery::metadata` СЂР°Р·РІРѕСЂР°С‡РёРІР°РµС‚ СЂРµРµСЃС‚СЂ РІРёС‚СЂРёРЅРЅС‹С… РѕРїРёСЃР°РЅРёР№ (РЅР°Р·РІР°РЅРёРµ, РѕРїРёСЃР°РЅРёРµ, СЃСЃС‹Р»РєРё, РёР·РѕР±СЂР°Р¶РµРЅРёРµ) РґР»СЏ РєР°Р¶РґРѕР№ Р»РѕС‚РµСЂРµРё, РїСѓР±Р»РёРєСѓРµС‚ СЃРѕР±С‹С‚РёСЏ `LotteryMetadataUpsertedEvent`/`LotteryMetadataRemovedEvent` Рё РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ view-С„СѓРЅРєС†РёРё `list_lottery_ids`, `has_metadata`, `get_metadata`; Move-С‚РµСЃС‚С‹ `metadata_tests` РїСЂРѕРІРµСЂСЏСЋС‚ РѕР±РЅРѕРІР»РµРЅРёРµ Р·Р°РїРёСЃРµР№ Рё Р·Р°С‰РёС‚Сѓ РѕС‚ РЅРµР°РІС‚РѕСЂРёР·РѕРІР°РЅРЅС‹С… РІС‹Р·РѕРІРѕРІ.
- РџРѕРґРіРѕС‚РѕРІРёС‚СЊ Р±СЂРµРЅРґ-Р°РєС‚РёРІС‹ (РЅР°Р·РІР°РЅРёРµ, Р»РѕРіРѕС‚РёРї, РїСЂРѕРјРѕ-СЃР°Р№С‚) Рё СЃРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°С‚СЊ РјР°СЂРєРµС‚РёРЅРі СЃ Р·Р°РїСѓСЃРєРѕРј Р»РѕС‚РµСЂРµР№.

## Р”РѕСЂРѕР¶РЅР°СЏ РєР°СЂС‚Р° РїРѕСЃС‚Р°РІРєРё
1. **Р­С‚Р°Рї 0 вЂ“ РСЃСЃР»РµРґРѕРІР°РЅРёРµ Рё Р°СЂС…РёС‚РµРєС‚СѓСЂР°:** РїРѕРґС‚РІРµСЂРґРёС‚СЊ С‚СЂРµР±РѕРІР°РЅРёСЏ, СЃРѕР·РґР°С‚СЊ ADR, СЃРѕРіР»Р°СЃРѕРІР°С‚СЊ РґРёР·Р°Р№РЅ-С‚РѕРєРµРЅС‹ Рё РїРѕРґРіРѕС‚РѕРІРёС‚СЊ РѕР±С‰РёР№ РёРЅСЃС‚СЂСѓРјРµРЅС‚Р°СЂРёР№.
2. **Р­С‚Р°Рї 1 вЂ“ РћРЅС‡РµР№РЅ-СЏРґСЂРѕ:** СЂРµР°Р»РёР·РѕРІР°С‚СЊ VRF-С…Р°Р±, С„Р°Р±СЂРёРєСѓ Р»РѕС‚РµСЂРµР№, СЂР°СЃС€РёСЂРµРЅРёСЏ РєР°Р·РЅР°С‡РµР№СЃС‚РІР° Рё РјРёРіСЂР°С†РёРѕРЅРЅС‹Рµ СЃРєСЂРёРїС‚С‹ СЃ Move-С‚РµСЃС‚Р°РјРё.
   - РЎС‚Р°С‚СѓСЃ: VRF-С…Р°Р±, С„Р°Р±СЂРёРєР°, РєРѕР»Р»РµРєС†РёСЏ СЌРєР·РµРјРїР»СЏСЂРѕРІ, РјРѕРґСѓР»СЊ СЂР°СѓРЅРґРѕРІ Рё РјРЅРѕРіРѕРїСѓР»РѕРІРѕРµ РєР°Р·РЅР°С‡РµР№СЃС‚РІРѕ СЂР°Р·РІРµСЂРЅСѓС‚С‹ Рё СЃРІСЏР·Р°РЅС‹ РјРµР¶РґСѓ СЃРѕР±РѕР№; РґРѕР±Р°РІР»РµРЅС‹ СЃРѕР±С‹С‚РёСЏ СЂРµРіРёСЃС‚СЂР°С†РёРё, СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёРё blueprint, СѓРїСЂР°РІР»РµРЅРёСЏ СЂР°СѓРЅРґР°РјРё Рё Move-С‚РµСЃС‚С‹ РЅР° РѕСЃРЅРѕРІРЅС‹Рµ СЃС†РµРЅР°СЂРёРё.
3. **Р­С‚Р°Рї 2 вЂ“ Р‘СЌРєРµРЅРґ-РїР»Р°С‚С„РѕСЂРјР°:** СЂР°Р·РІРµСЂРЅСѓС‚СЊ СЃРµСЂРІРёСЃ Р°РєРєР°СѓРЅС‚РѕРІ, СЃР±РѕСЂ РґР°РЅРЅС‹С…, real-time СЃР»РѕР№, fairness-API Рё Р°РІС‚РѕРјР°С‚РёР·Р°С†РёРё Supra AutoFi.
4. **Р­С‚Р°Рї 3 вЂ“ Р¤СЂРѕРЅС‚РµРЅРґ-РѕРїС‹С‚:** РёРЅС‚РµРіСЂРёСЂРѕРІР°С‚СЊ Figma-РґРёР·Р°Р№РЅ, РїРѕСЃС‚СЂРѕРёС‚СЊ РєР°С‚Р°Р»РѕРі/РґРµС‚Р°Р»Рё Р»РѕС‚РµСЂРµР№, СѓРїСЂР°РІР»РµРЅРёРµ РїСЂРѕС„РёР»РµРј, С‡Р°С‚, РїР°РЅРµР»СЊ С‡РµСЃС‚РЅРѕСЃС‚Рё Рё Р»РѕРєР°Р»РёР·Р°С†РёСЋ.
5. **Р­С‚Р°Рї 4 вЂ“ Growth-С„СѓРЅРєС†РёРё:** Р·Р°РїСѓСЃС‚РёС‚СЊ С‡РµРє-Р»РёСЃС‚С‹, СЂРѕР·С‹РіСЂС‹С€Рё РіР»РѕР±Р°Р»СЊРЅРѕРіРѕ РґР¶РµРєРїРѕС‚Р°, Р°РІС‚РѕРїРѕРєСѓРїРєСѓ, СЂРµС„РµСЂР°Р»СЊРЅС‹Рµ Рё С‚РµСЃС‚РµСЂСЃРєРёРµ Р±РѕРЅСѓСЃС‹, NFT-РЅР°РіСЂР°РґС‹ Рё РјР°РіР°Р·РёРЅ.
6. **Р­С‚Р°Рї 5 вЂ“ Р—Р°РїСѓСЃРє Рё СЃРѕРїСЂРѕРІРѕР¶РґРµРЅРёРµ:** РїСЂРѕРІРµСЃС‚Рё Р°СѓРґРёС‚С‹, РЅР°РіСЂСѓР·РѕС‡РЅС‹Рµ С‚РµСЃС‚С‹, РєРѕРјРїР»Р°РµРЅСЃ-РїСЂРѕРІРµСЂРєРё, РјР°СЂРєРµС‚РёРЅРіРѕРІС‹Р№ СЂРµР»РёР· Рё РЅР°Р»Р°РґРёС‚СЊ РїРѕСЃС‚-СЂРµР»РёР·РЅСѓСЋ Р°РЅР°Р»РёС‚РёРєСѓ.
   - Р”РѕРїРѕР»РЅРёС‚РµР»СЊРЅРѕ: Р·Р°С„РёРєСЃРёСЂРѕРІР°С‚СЊ СѓСЃРїРµС€РЅС‹Р№ РґРµРїР»РѕР№ Рё smoke-С‚РµСЃС‚С‹ VRF-С…Р°Р±Р°, С„Р°Р±СЂРёРєРё Рё РјСѓР»СЊС‚Рё-Р»РѕС‚РµСЂРµР№ РІ РѕР±РµРёС… СЃРµС‚СЏС… (`testnet`/`mainnet`), СЃРёРЅС…СЂРѕРЅРёР·РёСЂРѕРІР°С‚СЊ Р°РґСЂРµСЃР° Рё РїР°СЂР°РјРµС‚СЂС‹ РІ РґРѕРєСѓРјРµРЅС‚Р°С†РёРё Рё runbookвЂ™Р°С….

## РћС‚РєСЂС‹С‚С‹Рµ РІРѕРїСЂРѕСЃС‹ Рё СѓС‡Р°СЃС‚РёРµ РІР»Р°РґРµР»СЊС†Р° РїСЂРѕРґСѓРєС‚Р°
- Р’РѕРїСЂРѕСЃС‹ РїРѕ РїСЂРѕРґСѓРєС‚Сѓ, СЌРєРѕРЅРѕРјРёРєРµ РёР»Рё РґРёР·Р°Р№РЅСѓ, С‚СЂРµР±СѓСЋС‰РёРµ СЂРµС€РµРЅРёСЏ, Р±СѓРґРµРј РІС‹РЅРѕСЃРёС‚СЊ РІР»Р°РґРµР»СЊС†Сѓ РїСЂРѕРґСѓРєС‚Р° РґРѕ РЅР°С‡Р°Р»Р° СЂР°Р·СЂР°Р±РѕС‚РєРё.
- РќРѕРІС‹Рµ РёРЅСЃС‚СЂСѓРјРµРЅС‚С‹ Supra РёР»Рё РїР°СЂС‚РЅС‘СЂСЃРєРёРµ РёРЅС‚РµРіСЂР°С†РёРё РѕС†РµРЅРёРІР°РµРј СЃРѕРІРјРµСЃС‚РЅРѕ, С‡С‚РѕР±С‹ СЃРѕС…СЂР°РЅРёС‚СЊ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ СЃ РІРѕР·РјРѕР¶РЅРѕСЃС‚СЏРјРё СЌРєРѕСЃРёСЃС‚РµРјС‹.

## РљР°Рє СЃС‚Р°СЂС‚РѕРІР°С‚СЊ
- РСЃРїРѕР»СЊР·РѕРІР°С‚СЊ С‚РµРєСѓС‰РёР№ СЂРµРїРѕР·РёС‚РѕСЂРёР№ РєР°Рє С„СѓРЅРґР°РјРµРЅС‚, РїРѕСЃС‚РµРїРµРЅРЅРѕ Р·Р°РјРµРЅСЏСЏ РјРѕРґСѓР»Рё Рё СЃРµСЂРІРёСЃС‹ СЃРѕРіР»Р°СЃРЅРѕ РґРѕСЂРѕР¶РЅРѕР№ РєР°СЂС‚Рµ.
- Р Р°РЅРЅРµРµ СЂР°Р·РІРµСЂРЅСѓС‚СЊ РѕР±С‰СѓСЋ РёРЅС„СЂР°СЃС‚СЂСѓРєС‚СѓСЂСѓ (Р‘Р”, РѕС‡РµСЂРµРґРё СЃРѕРѕР±С‰РµРЅРёР№, Р°РЅР°Р»РёС‚РёС‡РµСЃРєРёР№ РєРѕРЅРІРµР№РµСЂ), С‡С‚РѕР±С‹ РєРѕРјР°РЅРґС‹ РјРѕРіР»Рё СЂР°Р±РѕС‚Р°С‚СЊ РїР°СЂР°Р»Р»РµР»СЊРЅРѕ.
- РџРѕ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё РїСЂРёРјРµРЅСЏС‚СЊ Supra CLI, Supra AutoFi Рё РґСЂСѓРіРёРµ РѕС„РёС†РёР°Р»СЊРЅС‹Рµ РёРЅСЃС‚СЂСѓРјРµРЅС‚С‹, РѕСЃС‚Р°РІР°СЏСЃСЊ РЅР°С†РµР»С‘РЅРЅС‹РјРё РЅР° Р±Р»РѕРєС‡РµР№РЅ Supra.


