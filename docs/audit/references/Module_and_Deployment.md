# Справочник: разработка и деплой модулей на Supra

## 1. Вызов функций Move из StarKey Wallet
**Задача.** Подготовить полезную нагрузку для entry-функции и подписать её в кошельке StarKey.

**Решение.** Используйте пример из `supra-l1-sdk` для сборки `rawTransaction` и передачи его в кошелёк. Последовательность включает формирование `serializedRawTransaction` и отправку через `supraClient.sendTxUsingSerializedRawTransaction` с включённой симуляцией и ожиданием подтверждения.

## 2. Подпись и проверка сообщений в StarKey Wallet
**Задача.** Подписать произвольное сообщение и проверить подпись.

**Решение.** Обновите StarKey Wallet до версии ≥ 1.1.24, затем используйте `supraProvider.signMessage`. Библиотека `tweetnacl` позволяет верифицировать подпись, преобразовав сообщение в hex и сравнив с публичным ключом из ответа.

## 3. Ошибка `0x1::resource_account: 0x60001`
**Симптомы.** Публикация пакета завершается указанным кодом ошибки, несмотря на успешную компиляцию.

**Решение.** Ошибка сигнализирует о проблеме с ресурсным аккаунтом. Рекомендуется использовать объекты вместо ресурсных аккаунтов или убедиться, что контейнер ресурса развёрнут по ожидаемому адресу. Дополнительная информация доступна в Supra REST API и исходниках `resource_account.move`; для тестов можно опираться на пример репозитория `TS-SDK_Create-Resource-Account-And-Publish-Package`.

## 4. Компиляция пакета: `supra move tool compile`
**Симптомы.** Компиляция прекращается с сообщением о невозможности обновить зависимость `SupraFramework`.

**Решение.** Закрепите зависимость в `Move.toml` на конкретный git-ревизии и подпапку:
```toml
SupraFramework = { git = "https://github.com/Entropy-Foundation/aptos-core.git", rev = "dev", subdir = "aptos-move/framework/supra-framework" }
```

## 5. Вызов опубликованных модулей Supra
**Задача.** Получить список модулей и конкретных функций, развёрнутых Supra.

**Решение.** Используйте REST API `https://rpc-testnet.supra.com/rpc/v1/accounts/{address}/modules` и `.../modules/{module_name}`. Исходники модулей доступны в публичном репозитории фреймворка.

## 6. Зависимости цифровых активов для NFT
**Задача.** Узнать адрес размещения модулей цифровых активов и получить документацию.

**Решение.** Модули `aptos-token` и `token` доступны по адресу `0x4` и документированы в каталоге `aptos-token-objects` репозитория Aptos-Core. Для проверки используйте REST-вызов `https://rpc-mainnet.supra.com/rpc/v1/accounts/0x4/modules`.

## 7. Пример модуля для пользовательской монеты
**Цель.** Развернуть собственный фанконтролируемый токен.

**Решение.** Пример `airdrop_deployer::bitcoin_coin` демонстрирует инициализацию, регистрацию и выпуск токена с 8 десятичными знаками, а также строгий контроль доступа через ресурс `BitcoinCapability`. Код показывает, как проверять владельца, инициализировать модуль и выпускать монеты в указанный аккаунт.

## 8. Ошибка «account isn't registered» при `transfer`
**Симптомы.** Перевод токенов отклоняется из-за отсутствия регистрации счёта.

**Решение.** Перед переводом убедитесь, что получатель зарегистрирован через `coin::register`. При необходимости реализуйте автоматическую регистрацию внутри `transfer`, но учитывайте последствия для безопасности и ограничений модуля.

## 9. Обращение к Supra Coin
**Задача.** Использовать нативный токен Supra в пользовательском модуле.

**Решение.** Импортируйте `use supra_framework::supra_coin;` и вызывайте соответствующие функции модуля для операций с Supra Coin.
