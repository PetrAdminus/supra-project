# Supra Lottery / –°—É–ø—Ä–∞ –õ–æ—Ç–µ—Ä–µ—è

## –†—É—Å—Å–∫–∏–π

### –û–±–∑–æ—Ä
Supra Lottery ‚Äî –ø–∞–∫–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–∞ Move –¥–ª—è –±–ª–æ–∫—á–µ–π–Ω–∞ Supra. –û–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ª–æ—Ç–µ—Ä–µ—é —Å –æ–Ω—á–µ–π–Ω-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Supra dVRF 3.0, whitelisting –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –∑–∞—â–∏—Ç–æ–π –∫–æ–ª–±—ç–∫–∞ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Supra; –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å, —Ç–µ—Å—Ç–æ–≤–∞—è –±–∞—Ç–∞—Ä–µ—è –∏ Docker-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç—ã —Å Supra CLI.

#### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –õ–æ—Ç–µ—Ä–µ–π–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ Move, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é —Å–µ—Ç—å –±–ª–æ–∫—á–µ–π–Ω–∞ Supra.
- ––Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏ Supra dVRF v3 (`supra_vrf`, `deposit`) –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ö—ç—à–µ–π payload –¥–ª—è VRF-–∑–∞–ø—Ä–æ—Å–æ–≤.
- –ú–æ–¥—É–ª—å `treasury_v1` –¥–µ–ª–∏—Ç –æ–ø–ª–∞—Ç—É –±–∏–ª–µ—Ç–æ–≤ –º–µ–∂–¥—É –¥–∂–µ–∫–ø–æ—Ç–æ–º, —Ç–µ–∫—É—â–∏–º –ø—Ä–∏–∑–æ–≤—ã–º —Ñ–æ–Ω–¥–æ–º, –∫–∞–∑–Ω–æ–π –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–º–∏ –≤–∞—É–ª—Ç–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑–∏—Å–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç view-—Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- –í Move-–≤–æ—Ä–∫—Å–ø–µ–π—Å–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –º–æ–¥—É–ª–µ–π `vrf_hub::hub` –∏ `lottery_factory::registry`, —Ñ–æ—Ä–º–∏—Ä—É—é—â–∏–µ –æ—Å–Ω–æ–≤—É VRF-—Ö–∞–±–∞ –∏ —Ñ–∞–±—Ä–∏–∫–∏ –º—É–ª—å—Ç–∏-–ª–æ—Ç–µ—Ä–µ–π.
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ, –ø—Ä–æ—Ñ–∏–ª–∏ Supra CLI, —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Storybook/Vitest, —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ runbook‚Äô–∏.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- –Ø–∑—ã–∫ Move –ø–æ–¥ Supra VM
- –ö–ª–∏–µ–Ω—Ç Supra dVRF v3 (–º–æ–¥—É–ª–∏ `supra_vrf`, `deposit` –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `lottery::main_v2`)
- Fungible Asset-—Ç–æ–∫–µ–Ω, —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π —á–µ—Ä–µ–∑ –æ–±—ë—Ä—Ç–∫—É `lottery::treasury_v1`
- –°—Ä–µ–¥–∞ Supra CLI –≤ Docker (`docker-compose.yml`)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ Move-—é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ whitelisting, –æ–±—Ä–∞–±–æ—Ç–∫—É VRF –∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (`supra/move_workspace/lottery/tests`)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop (–∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Ä–∞–Ω—Ç–∞–π–º).
2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞: `cd supra-project` (–º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–∫–ª—é—á–∞–µ—Ç Move-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é).
3. –†–∞–±–æ—Ç–∞–π—Ç–µ –∏–∑ –≤–µ—Ç–∫–∏ `main`; —Ñ–∏—á–∞-–ø–æ—Ç–æ–∫–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö –∏ –æ—Ñ–æ—Ä–º–ª—è–π—Ç–µ merge request‚Äô—ã –≤ `main`.
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ shell –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Supra CLI: `docker compose run --rm --entrypoint bash supra_cli`.
5. –í—Å–µ –∫–æ–º–∞–Ω–¥—ã Supra CLI –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–∏ `script -q`, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏ (—Å–º. `docs/testnet_runbook.md`).

> –ö–ª—é—á–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `supra/configs` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ü–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –∑–∞–º–µ–Ω–∏—Ç–µ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

### –ó–∞–ø—É—Å–∫ Move-—Ç–µ—Å—Ç–æ–≤
```bash
docker compose run --rm \
  --entrypoint bash supra_cli \
  -lc "/supra/supra move tool test --package-dir /supra/move_workspace/lottery --named-addresses lottery=$(grep '^lottery' /supra/.move/config | cut -d'=' -f2) --skip-fetch-latest-git-deps"
```
–ö–æ–º–∞–Ω–¥–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∞–∫–µ—Ç –∏ –ø—Ä–æ–≥–æ–Ω—è–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä Move-—é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ (–ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ VRF, whitelisting, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤) –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ `--named-addresses` (–∞–¥—Ä–µ—Å–∞ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–∑ `.move/config`), –∏–Ω–∞—á–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Move 1 –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É –æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∞–¥—Ä–µ—Å–∞—Ö. –£–¥–æ–±–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –≤ `script -q` –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∂—É—Ä–Ω–∞–ª–æ–≤.

> –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –æ–±–æ–ª–æ—á–∫–∏ –±–µ–∑ Docker —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `MOVE_HOME=.move`, —á—Ç–æ–±—ã Supra CLI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–ª `workspace_dir` –∏ –∞–¥—Ä–µ—Å–∞ –∏–∑ `.move/config`, –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É —Å `--named-addresses`.

### –ï–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç Move-—Ç–µ—Å—Ç–æ–≤ –∏ –æ—Ç—á—ë—Ç–æ–≤

–ü–æ–º–∏–º–æ –∞–ª–∏–∞—Å–∞ `python -m supra.scripts.cli move-test`, –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —Ä–∞–Ω–Ω–µ—Ä `SupraLottery/supra/scripts/move_tests.py`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø—Ä—è–º—É—é —É–ø—Ä–∞–≤–ª—è–µ—Ç Supra/Aptos/Move CLI, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON/JUnit-–æ—Ç—á—ë—Ç—ã –∏ –≤–µ–¥—ë—Ç –ª–æ–≥ `tmp/unittest.log` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç workspace –∏ –∞–¥—Ä–µ—Å–∞ –∏–∑ `.move/config`, –∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Supra CLI –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ Aptos –∏–ª–∏ vanilla Move.

```bash
PYTHONPATH=SupraLottery python -m supra.scripts.move_tests \
  --workspace SupraLottery/supra/move_workspace \
  --all-packages \
  --mode test \
  --keep-going \
  --report-json tmp/move-test-report.json \
  --report-junit tmp/move-test-report.xml \
  --log-path tmp/unittest.log \
  -- --skip-fetch-latest-git-deps
```

–§–ª–∞–≥ `--mode check` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å—Å—è `move check`, –∞ `--dry-run --cli-flavour supra` ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á—ë—Ç—ã –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π CLI. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–Ω–Ω–µ—Ä —á–∏—Ç–∞–µ—Ç `.move/config` (–Ω–∞—á–∏–Ω–∞—è —Å –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –≤–æ—Ä–∫—Å–ø–µ–π—Å–∞ –∏ –≤—ã—à–µ –ø–æ –∫–∞—Ç–∞–ª–æ–≥–∞–º), —Å–æ–±–∏—Ä–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Ö –≤ `--named-addresses`; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å —Ñ–ª–∞–≥–æ–º `--move-config` –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —á–µ—Ä–µ–∑ `--no-auto-named-addresses`. Workflow GitHub Actions `.github/workflows/move-tests.yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∏ –≤—ã–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ —Ä–∞–∑–¥–µ–ª–µ CI.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `docker-compose.yml` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Supra CLI.
- `supra/configs/` ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ Supra —Å –∫–ª—é—á–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏).
- `SupraLottery/supra/move_workspace/lottery/Move.toml` ‚Äî –º–∞–Ω–∏—Ñ–µ—Å—Ç Move-–ø–∞–∫–µ—Ç–∞ –∏ —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤.
- `SupraLottery/supra/move_workspace/lottery/sources/` ‚Äî Move-–º–æ–¥—É–ª–∏ –ª–æ—Ç–µ—Ä–µ–∏: —è–¥—Ä–æ (`Lottery.move`), —Ä–∞—É–Ω–¥—ã (`LotteryRounds.move`), —ç–∫–∑–µ–º–ø–ª—è—Ä—ã (`LotteryInstances.move`), –∞–≤—Ç–æ–ø–æ–∫—É–ø–∫–∞ (`Autopurchase.move`), VIP/—Ä–µ—Ñ–µ—Ä–∞–ª—ã/–º–∞–≥–∞–∑–∏–Ω (`Vip.move`, `Referrals.move`, `Store.move`), –∏—Å—Ç–æ—Ä–∏—è –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (`History.move`, `Metadata.move`), –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ NFT-–Ω–∞–≥—Ä–∞–¥—ã (`Operators.move`, `NftRewards.move`), –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–æ (`Treasury.move`, `TreasuryMulti.move`) –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (`Migration.move`).
- `SupraLottery/supra/move_workspace/lottery/tests/` ‚Äî Move-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º (—è–¥—Ä–æ, —Ä–∞—É–Ω–¥—ã, –∞–≤—Ç–æ–ø–æ–∫—É–ø–∫–∞, VIP, —Ä–µ—Ñ–µ—Ä–∞–ª—ã, –º–∞–≥–∞–∑–∏–Ω, –º–∏–≥—Ä–∞—Ü–∏–∏).
- `SupraLottery/supra/move_workspace/vrf_hub/` ‚Äî VRF-—Ö–∞–± —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏.
- `SupraLottery/supra/move_workspace/lottery_factory/` ‚Äî —Ñ–∞–±—Ä–∏–∫–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –ª–æ—Ç–µ—Ä–µ–π –∏ —Ç–µ—Å—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.
- `SupraLottery/supra/move_workspace/SupraVrf/` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –º–æ–¥—É–ª–µ–π `supra_vrf` –∏ `deposit`, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–µ—Å—Ç–∞–º–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.
- `SupraLottery/supra/scripts/` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–±–æ—Ä Python- –∏ shell-—É—Ç–∏–ª–∏—Ç: CLI (`cli.py`), API-—Å–µ—Ä–≤–µ—Ä (`api_server.py`), –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (`lib/`), —Å–µ—Ä–≤–∏—Å—ã –∞–∫–∫–∞—É–Ω—Ç–æ–≤/–ø—Ä–æ–≥—Ä–µ—Å—Å–∞/–ø–æ–¥–¥–µ—Ä–∂–∫–∏ (`accounts/`, `progress/`, `support/`, `realtime/`), –∞ —Ç–∞–∫–∂–µ runbook-—Å–∫—Ä–∏–ø—Ç—ã (`testnet_*.sh`).
- `supra/move_workspace` –∏ `supra/scripts` ‚Äî —Å–∏–º–ª–∏–Ω–∫–∏ –Ω–∞ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –≤–Ω—É—Ç—Ä–∏ `SupraLottery/`, —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `supra/scripts/testnet_migration.sh`).
- `docs/` ‚Äî runbook‚Äô–∏, –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –ø–æ dVRF –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
- `frontend/` ‚Äî SPA, –º–æ–∫-–¥–∞–Ω–Ω—ã–µ, Storybook-–∏—Å—Ç–æ—Ä–∏–∏ –∏ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã.

> –ó–µ—Ä–∫–∞–ª—å–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ (`SupraLottery/supra/...` –∏ `supra/...`) –∑–∞–º–µ–Ω–µ–Ω—ã —Å–∏–º–ª–∏–Ω–∫–∞–º–∏ –Ω–∞ –µ–¥–∏–Ω—ã–π Move-workspace; –¥–∞–ª—å–Ω–µ–π—à–∏–µ –ø—Ä–∞–≤–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤ `SupraLottery/supra/...`.

### –ö–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–æ –Ω–∞ Fungible Asset
–ú–æ–¥—É–ª—å `lottery::treasury_v1` –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç `0x1::fungible_asset` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **––Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞** ‚Äî `treasury_v1::init_token` —Å–æ–∑–¥–∞—ë—Ç Metadata-–æ–±—ä–µ–∫—Ç, –≤–∫–ª—é—á–∞–µ—Ç primary store –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç mint/burn/transfer capability –Ω–∞ –∞–¥—Ä–µ—Å–µ –ª–æ—Ç–µ—Ä–µ–∏.
2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â** ‚Äî `treasury_v1::register_store` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∑–∞–≤–µ—Å—Ç–∏ primary store, `register_store_for` –¥–∞—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å store –¥–ª—è –ª—é–±–æ–≥–æ –∞–¥—Ä–µ—Å–∞, –∞ `register_stores_for` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å–æ–≤ –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤.
3. **–ú–∏–Ω—Ç/–±—ë—Ä–Ω/—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ `mint_to`, `burn_from`, `transfer_between` –∏—Å–ø–æ–ª—å–∑—É—é—Ç capability-—Ä–µ—Å—É—Ä—Å—ã –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–∞ –∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ store —É –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
4. **–ó–∞–º–æ—Ä–æ–∑–∫–∞ store** ‚Äî `treasury_v1::set_store_frozen` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –∏ –¥–µ–ø–æ–∑–∏—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ primary store (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤). –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ —Å `false` —Å–Ω–∏–º–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.
5. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π** ‚Äî –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `set_recipients` –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–±—è–∑–∞–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å primary store –Ω–∞ –∫–∞–∂–¥–æ–º —Ü–µ–ª–µ–≤–æ–º –∞–¥—Ä–µ—Å–µ (`register_store_for`/`register_stores_for`), –∏–Ω–∞—á–µ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è `E_RECIPIENT_STORE_NOT_REGISTERED`; —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Supra FA –æ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ store.
6. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è** ‚Äî `treasury_v1::set_config` –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–æ–ª–∏ (basis points) –º–µ–∂–¥—É –¥–∂–µ–∫–ø–æ—Ç–æ–º, –ø—Ä–∏–∑–æ–≤—ã–º –ø—É–ª–æ–º –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏, –∞ `ConfigUpdatedEvent` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è; `get_config` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤.
7. **––Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ—Ç–µ—Ä–µ–µ–π** ‚Äî `treasury_v1::deposit_from_user` —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –±–∏–ª–µ—Ç–∞, –∞ `payout_from_treasury` (–ø–∞–∫–µ—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –¥–æ—Å—Ç—É–ø–Ω–∞—è –≤—Å–µ–º –º–æ–¥—É–ª—è–º `lottery`) —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–∂–µ–∫–ø–æ—Ç –∏–∑ –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–∞; –æ–±–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ store —É –ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∞ –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è.

–ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

- `treasury_v1::treasury_balance()` ‚Äî —Ç–µ–∫—É—â–∏–π –∑–∞–ø–∞—Å —Ç–æ–∫–µ–Ω–∞ –≤ –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–µ (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç `fungible_asset::balance` –¥–ª—è –∞–¥—Ä–µ—Å–∞ –ª–æ—Ç–µ—Ä–µ–∏).
- `treasury_v1::balance_of(account)` ‚Äî –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `treasury_v1::metadata_summary()` ‚Äî –∏–º—è, —Å–∏–º–≤–æ–ª, decimals –∏ URI –º–µ—Ç–∞–¥–∞—Ç—ã —Ç–æ–∫–µ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `string::String` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ view-—Ñ—É–Ω–∫—Ü–∏—è–º–∏ Supra](https://docs.supra.com/network/move/token-standards#view-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8)).
- `treasury_v1::get_config()` ‚Äî —Ç–µ–∫—É—â–∏–µ –¥–æ–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∂–µ–∫–ø–æ—Ç–∞ –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ basis points.
- `treasury_v1::account_status(account)` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è primary store, –∞–¥—Ä–µ—Å —Å—Ç–æ—Ä–∞ –∏ –±–∞–ª–∞–Ω—Å –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ.
- `treasury_v1::account_extended_status(account)` ‚Äî —Ç–æ –∂–µ, –ø–ª—é—Å —Ñ–ª–∞–≥ freeze –∏–∑ `primary_fungible_store::is_frozen`.
- `treasury_v1::store_frozen(account)` ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–º–æ—Ä–æ–∑–∫–∏ primary store (–ø—Ä–∏ `true` –º–æ–¥—É–ª—å `fungible_asset` –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –º–∏–Ω—Ç/–¥–µ–ø–æ–∑–∏—Ç—ã/–≤—ã–≤–æ–¥—ã).
- `treasury_v1::total_supply()` –∏ `treasury_v1::metadata_address()` ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø—É—Å–∫–∞ –∏ –∞–¥—Ä–µ—Å–∞ Metadata.

–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –≤ `SupraLottery/supra/move_workspace/lottery/tests/lottery_tests.move` –≤–∫–ª—é—á–∞—é—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é store, –º–∏–Ω—Ç –≤ –ø–æ–ª—å–∑—É —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ –ø–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤/–≤—ã–ø–ª–∞—Ç–∞ –ø—Ä–∏–∑–∞ —Ä–∞—Å—Ö–æ–¥—É—é—Ç FA-—Ç–æ–∫–µ–Ω. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: –ø–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–∞, –º–∏–Ω—Ç –∏ –¥–µ–ø–æ–∑–∏—Ç –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ store –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è abort —Å –∫–æ–¥–∞–º–∏ `13` (–Ω–∞ —É—Ä–æ–≤–Ω–µ `main_v2`) –∏ `4` (–≤ `treasury_v1`).

### –ü–ª–∞–Ω –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è Move-–ø–∞–∫–µ—Ç–∞: `0.0.1`.
- –ü–æ–¥–Ω–∏–º–∞–µ–º –¥–æ `0.0.2` –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ SDK dVRF v3 –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Docker-–æ–±—Ä–∞–∑–∞.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º `Move.toml`, `README.md` –∏ `docs/dVRF_v3_checklist.md` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –±—É–º–ø–µ –≤–µ—Ä—Å–∏–∏.
- –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º –ø—Ä–æ–≥–æ–Ω—è–µ–º `supra move tool test` –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∏—Ç–æ–≥–∏ –≤ changelog (—Ä–∞–∑–¥–µ–ª README –∏–ª–∏ docs).

### –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è dVRF v3
–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –æ–Ω—á–µ–π–Ω-—Ñ—É–Ω–∫—Ü–∏–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏ Supra dVRF 3.0.

### –ó–∞–ø—É—Å–∫ –Ω–∞ Supra testnet
- RPC testnet: `https://rpc-testnet.supra.com` (chain id 6).
- –ü–æ–¥—Ä–æ–±–Ω—ã–π runbook: —Å–º. `docs/testnet_runbook.md`.
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è–µ–º —á–µ—Ä–µ–∑ Docker (`supra_cli`), —É–∫–∞–∑—ã–≤–∞—è –ø—Ä–æ—Ñ–∏–ª—å testnet (`/supra/supra move tool ... --profile <PROFILE>`).
- –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å `supra profile new <NAME> <PRIVATE_KEY>` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `SUPRA_CONFIG=/supra/configs/<profile>.yaml`, —á—Ç–æ–±—ã CLI –ø–æ–¥—Ç—è–Ω—É–ª–∞ RPC –∏ –ª–∏–º–∏—Ç—ã –≥–∞–∑–∞ (—Ñ–æ—Ä–º–∞—Ç –æ–ø–∏—Å–∞–Ω –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Supra CLI](https://docs.supra.com/network/move/getting-started/supra-cli-with-docker)).
- –î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ whitelisting –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ `record_client_whitelist_snapshot`, `record_consumer_whitelist_snapshot`, `configure_vrf_request` ‚Äî –æ–Ω–∏ –ª–æ–≥–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–∞–∑–¥–µ–ª—É dVRF –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.supra.com/dvrf).
- –í —Ä–∞–∑–¥–µ–ª–µ 8 runbook-–∞ –µ—Å—Ç—å —á–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è FA + VRF, –∞ –≤ —Ä–∞–∑–¥–µ–ª–µ 9 ‚Äî –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –Ω–∞ —Å–ª—É—á–∞–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤.
- `record_client_whitelist_snapshot` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç maxGasPrice/maxGasLimit –∏ —Å–Ω–∞–ø—à–æ—Ç `minBalanceLimit`; –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–æ–±—ã—Ç–∏–µ `ClientWhitelistRecordedEvent`.
- `configure_vrf_request` –∑–∞–¥–∞—ë—Ç –∂–µ–ª–∞–µ–º—É—é –º–æ—â–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ (`rng_count`, `client_seed`) –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `VrfRequestConfigUpdatedEvent` –¥–ª—è –∞—É–¥–∏—Ç–∞.
- `record_consumer_whitelist_snapshot` –æ—Ç–º–µ—á–∞–µ—Ç `callbackGasPrice`/`callbackGasLimit` –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞; —Ñ–∞–∫—Ç –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ–º `ConsumerWhitelistSnapshotRecordedEvent`.
- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —É–∑–Ω–∞—ë–º —á–µ—Ä–µ–∑ `get_whitelist_status`, –∞ —Å–Ω–∞–ø—à–æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `get_min_balance_limit_snapshot`.
- –°—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ view-—Ñ—É–Ω–∫—Ü–∏—é `lottery::main_v2::get_ticket_price()`, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

### –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Supra dVRF 3.x –∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç –∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥.
- ––Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (React + TypeScript + Supra SDK + StarKey) —Å –Ω–æ–≤—ã–º–∏ view-—Ñ—É–Ω–∫—Ü–∏—è–º–∏ (`get_ticket_price`, `get_whitelist_status`).
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å REST/CLI-—Å–∫—Ä–∏–ø—Ç—ã –∏ –ø–∞–π–ø–ª–∞–π–Ω—ã –¥–µ–ø–ª–æ—è, –∏—Å–ø–æ–ª—å–∑—É—è `docs/testnet_runbook.md` –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.
- –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –ø–∞—Ä—Å–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π whitelisting –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥–∞–∑–∞, –∞–ª–µ—Ä—Ç—ã –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –¥–µ–ø–æ–∑–∏—Ç—É, –ø—Ä–æ–≤–µ—Ä–∫–∏ CI.
- –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤—ã–ø–ª–∞—Ç (–≥—Ä–∞—Ñ–∏–∫–∏, –≤—ã–≥—Ä—É–∑–∫–∏ –≤ BI).

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- –ü–æ–¥–ø–∏—Å–∫–∞ Supra dVRF 3.0 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å whitelisting –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π, –∞ —Å–æ–±—ã—Ç–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≥–∞–∑–∞ –∏ nonce.
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ö–µ—à –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏, `rng_count`, –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–∞–∑–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–ª–±—ç–∫–∞.
- Move-—Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ whitelisting –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

### –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Supra: https://docs.supra.com/move/getting-started
- –°—Ç–∞–Ω–¥–∞—Ä—Ç Fungible Asset: https://docs.supra.com/network/move/token-standards
- –î–µ—Ç–∞–ª–∏ –º–æ–¥—É–ª—è fungible_asset –∏ primary_fungible_store: https://docs.supra.com/network/move/supra-fungible-asset-fa-module
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ dVRF: https://docs.supra.com/dvrf
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Supra CLI: https://docs.supra.com/network/move/getting-started/supra-cli-with-docker
- –®–∞–±–ª–æ–Ω—ã dApp (–µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä dVRF): https://github.com/Supra-Labs/supra-dapp-templates
- Supra dev hub (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è): https://github.com/Supra-Labs/supra-dev-hub
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏: https://docs.supra.com/automation
- –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ dVRF v3: `docs/dVRF_v3_checklist.md`
- –°–Ω–∞–ø—à–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ dVRF v2: `docs/dVRF_v2_snapshot.md`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Supra: `techsupport@supra.com`

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ SupraLottery

### –ü–ª–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –º—É–ª—å—Ç–∏-–ª–æ—Ç–µ—Ä–µ–π –∏ VRF-—Ö–∞–±–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤ [docs/project_plan.md](docs/project_plan.md). –î–æ–∫—É–º–µ–Ω—Ç –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã: –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –µ–≥–æ –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–µ–π —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –ø—Ä–æ–¥—É–∫—Ç–∞.

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Å–µ–Ω—Ç—è–±—Ä—å 2025)
- Move-–ø–∞–∫–µ—Ç —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è, —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Supra CLI.
- –ê–∫–∫–∞—É–Ω—Ç —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ `0x9a969d3b77941cec267f03b9bbb323c0333fa63d0e9e15204edabc415f134490` **–¥–æ–±–∞–≤–ª–µ–Ω –≤ whitelist, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏**; –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ –≤—ã–∑–æ–≤—ã, –ø–æ–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `deposit::*` –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `EUNAUTHORIZED_ACCESS`.
- –ö–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (`get_lottery_status`, `get_whitelist_status`, `get_vrf_request_config`, `get_registered_tickets`, `treasury_v1::get_config`, `treasury_v1::get_balances`) –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `supra move tool view`.
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ (`frontend/`) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –º–æ–∫-–¥–∞–Ω–Ω—ã–º–∏, —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–ª—É—à–∫—É –∫–æ—à–µ–ª—å–∫–∞ StarKey –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –º–µ–∂–¥—É mock/Supra API; –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è whitelisting –æ–±–Ω–æ–≤–ª—è–µ–º `src/api/supraClient.ts`.

### Move¬†1: –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ç–µ—Å—Ç—ã
- –°–æ–±–ª—é–¥–∞–π—Ç–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è Move¬†1: –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `let mut`, –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ ASCII-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `supra_framework::account::new_event_handle` –∏ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ `supra_framework::event::emit_event` –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—ë—Ä—Ç–æ–∫, –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É —á–µ—Ä–µ–∑ –∞–ª–∏–∞—Å `std`.
- –î–ª—è —Ç–æ—á–µ—á–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞ –ø–∞–∫–µ—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `python -m supra.scripts.cli move-test --package lottery` ‚Äî —Å–∫—Ä–∏–ø—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ `SupraLottery/supra/move_workspace`, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ `--list-packages` –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≥–æ–Ω –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ `--all-packages`.
- –ï—Å–ª–∏ Supra CLI –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, —É—Ç–∏–ª–∏—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ `aptos move test` –∏–ª–∏ ¬´–≤–∞–Ω–∏–ª—å–Ω—ã–π¬ª `move test`, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞ (`--package-dir` –∏–ª–∏ `--package` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç CLI) –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ –æ–±—â–µ–≥–æ –≤–æ—Ä–∫—Å–ø–µ–π—Å–∞.
- –î–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--mode check`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `python -m supra.scripts.cli move-test --package lottery --mode check`.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤
- –î–ª—è –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –ø—Ä—è–º–æ –≤ –∫–æ–º–∞–Ω–¥–µ: `python -m supra.scripts.cli move-test --package lottery -- --override-addresses lottery=0x1ee ...`.
- –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —É–∂–µ –ª–µ–∂–∏—Ç —Ñ–∞–π–ª `.move/config` —Å —Ç–µ—Å—Ç–Ω–µ—Ç-–∞–¥—Ä–µ—Å–∞–º–∏ (`lottery`, `lottery_factory`, `vrf_hub`, `supra_addr`) –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ workspace `SupraLottery/supra/move_workspace`. –°–∫—Ä–∏–ø—Ç `move-test` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç —ç—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –µ—ë –≤–æ –≤—Å–µ flavour CLI (`supra`, `aptos`, `move`).
- –î–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ `.move/config.example` –≤ `.move/config` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å–∞ –Ω–∞ –±–æ–µ–≤—ã–µ. –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `Move.toml` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ø—Ä–æ–≥–æ–Ω–æ–º.

### –ü—Ä–æ—Ñ–∏–ª–∏ Supra CLI, —Ç–µ—Å—Ç–Ω–µ—Ç –∏ –º–µ–π–Ω–Ω–µ—Ç
- `supra/configs/testnet.yaml` –∏ `supra/.aptos/config.yaml` –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø—Ä–æ—Ñ–∏–ª—å –ª–æ—Ç–µ—Ä–µ–∏ (`lottery_v3`) –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.
- –î–ª—è —Ä—É—á–Ω–æ–≥–æ whitelisting –Ω–∞ —Ç–µ—Å—Ç–Ω–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–∏—Å—å–º–æ –Ω–∞ `techsupport@supra.com` —Å —Ç–µ–º–æ–π ¬´Request for Manual Whitelisting on Testnet¬ª, —É–∫–∞–∑–∞–≤ –∞–¥—Ä–µ—Å –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –≤—ã—à–µ.
- –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å Supra CLI –¥–ª—è –º–µ–π–Ω–Ω–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `supra/configs/mainnet.yaml`) –∏ –ø—Ä–æ–¥—É–±–ª–∏—Ä—É–π—Ç–µ runbook whitelisting/–¥–µ–ø–ª–æ—è —Å –±–æ–µ–≤—ã–º–∏ –∫–ª—é—á–∞–º–∏. –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–∞–∑–∞ –¥–ª—è –æ–±–µ–∏—Ö —Å–µ—Ç–µ–π.
- –î–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Supra –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –≤—ã–∑–æ–≤—ã `deposit::*` –∏ `request_draw`; —Å–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–∑–¥–µ–ª–∞—Ö 2‚Äì3 runbook‚Äô–∞ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–º–æ–∫–∞—Ö.
- –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –º–µ–π–Ω–Ω–µ—Ç-–ø—Ä–æ—Ñ–∏–ª—è —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`SUPRA_PROFILE`, `SUPRA_NETWORK`, `VRF_HUB_ADDRESS` –∏ –¥—Ä.) –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –¥–ª—è `testnet`, –∏ –¥–ª—è `mainnet`.

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (mock-first)
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `frontend/` ‚Äî –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ `frontend/README.md` (`pnpm run dev`, `pnpm run storybook`, `pnpm run test`).
- –°—Ç–µ–∫: React 19, Vite, React Query, Zustand, Storybook 9, Vitest, Prettier/Husky.
- –ú–æ–∫-–¥–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –≤ `frontend/src/mocks/{lottery-status-*,tickets-*,events-*}.json`.
- `frontend/src/api/client.ts` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É mock –∏ Supra —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ –ø–æ `VITE_API_MODE` –∏–ª–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä—É –≤ UI; —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∂–∏–≤—É—Ç –≤ `frontend/src/api/supraClient.ts`.
- –ö–ª–∏–µ–Ω—Ç Supra API –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç `/status` VRF-—Ö–∞–±–∞ –≤ —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–µ—Ä–µ–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ –∏ mock-—Ä–µ–∂–∏–º; —Ç–∏–ø—ã `LotteryStatus` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤, –¥–∞–Ω–Ω—ã–µ –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–∞ –∏ —Å—Ç–∞—Ç—É—Å VRF.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ `i18next + react-i18next`, —Å–ª–æ–≤–∞—Ä–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `frontend/src/i18n/messages.ts`, –∞ —Å–∫—Ä–∏–ø—Ç `pnpm run i18n:extract` –≤—ã–≥—Ä—É–∂–∞–µ—Ç JSON –≤ `frontend/public/locales/*`.
- –ó–∞–≥–ª—É—à–∫–∞ –∫–æ—à–µ–ª—å–∫–∞ (`frontend/src/features/wallet/`) —ç–º—É–ª–∏—Ä—É–µ—Ç StarKey; –∑–∞–º–µ–Ω–∏–º –µ—ë –Ω–∞ SDK –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Supra.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- `supra/move_workspace/Move.toml` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–∞–∫–µ—Ç—ã `lottery`, `vrf_hub` –∏ `lottery_factory`.
- `supra/scripts/` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ build/publish/migration; CLI-–∫–æ–º–∞–Ω–¥–∞ `python -m supra.scripts.cli vrf-audit --lottery-id <ID>` —Å–æ–±–∏—Ä–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è VRF –¥–ª—è –ø–∞–Ω–µ–ª–∏ —á–µ—Å—Ç–Ω–æ—Å—Ç–∏, –∞ FastAPI-—Å–ª—É–∂–±–∞ –æ—Ç–¥–∞—ë—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É `/lotteries/{id}/vrf-log`.

### –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è whitelisting
1. –°–ª–µ–¥—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª—É 4 `docs/testnet_runbook.md`, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å dVRF-—Ñ–ª–æ—É –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç.
2. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ö—ç—à–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –∞—É–¥–∏—Ç–∞.
3. –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞–±—ã –≤ `frontend/src/api/supraClient.ts` –Ω–∞ –∞–¥–∞–ø—Ç–µ—Ä—ã Supra REST/CLI (–∏–ª–∏ –±—ç–∫–µ–Ω–¥-–ø—Ä–æ–∫—Å–∏).
4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ —Ä–µ–∂–∏–º Supra –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ end-to-end —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–ø–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤, –∞–¥–º–∏–Ω—Å–∫–∏–π VRF, –ª–æ–≥–∏).
5. –û–±–Ω–æ–≤–∏—Ç–µ –º–æ–∫-—Ñ–∞–π–ª—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ–±—ã Storybook/Vitest –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã–º–∏.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å whitelisting –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π Supra.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `frontend/README.md` –∏ Storybook-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ –º–µ—Ä–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö CLI.
- –—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `supra/scripts/testnet_migration.sh` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è, –∫–æ–≥–¥–∞ –ø–æ—è–≤—è—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å Supra API-–∫–ª–∏–µ–Ω—Ç –ø–æ—Å–ª–µ whitelisting (–ø–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤, –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–æ, –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ñ–ª–æ—É).
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å Storybook-–º–æ–∫–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –±–∞–ª–∞–Ω—Å–∞–º–∏ –∫–∞–∑–Ω–∞—á–µ–π—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Ç–∏.

### –ù–∞–±–ª—é–¥–µ–Ω–∏—è –ø–æ –æ–ø—ã—Ç—É Crystara SDK
- SDK –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç blind box —á–µ—Ä–µ–∑ NextJS API-—Ä–æ—É—Ç—ã (`/api/batch-metadata`, `/api/lootbox`, `/api/lootbox-info`, `/api/metadata`, `/api/whitelist-amount`).
- Tailwind-—Ç–æ–∫–µ–Ω—ã (`rand.primary/secondary/accent/dark/light`) –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `BlindBoxPage` –ø–æ–º–æ–≥–∞—é—Ç —Å–æ–±—Ä–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ¬´–∂–∏–¥–∫–æ–≥–æ —Å—Ç–µ–∫–ª–∞¬ª.
- ––Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ StarKey –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö (`walletEvents.on(WALLET_EVENTS.TRANSACTION_START)`), —á—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç event-driven –ø–æ–¥—Ö–æ–¥.
- –—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `NEXT_PUBLIC_SUPRA_RPC_URL` –∏ `NEXT_PUBLIC_SUPRA_CHAIN_ID` (8/6) –ø–ª—é—Å –∑–∞–∫—Ä—ã—Ç—ã–µ API-—Ä–æ—É—Ç—ã Crystara.
- –î–ª—è UX –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è Sonner –∏ Framer Motion ‚Äî –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∫–∞–∫ –æ—Ä–∏–µ–Ω—Ç–∏—Ä –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Supra.